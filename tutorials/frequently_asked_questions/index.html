
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://mindspore-lab.github.io/mindocr/tutorials/frequently_asked_questions/">
      
      
        <link rel="prev" href="../../mkdocs/contributing/">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>FAQ - MindOCR Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#frequently-asked-questions" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="MindOCR Docs" class="md-header__button md-logo" aria-label="MindOCR Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MindOCR Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              FAQ
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../zh/tutorials/frequently_asked_questions/" hreflang="zh" class="md-select__link">
              中文
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/mindspore-lab/mindocr" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    mindspore-lab/mindocr
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../mkdocs/modelzoo_training/" class="md-tabs__link">
          
  
    
  
  Model Zoo

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../datasets/converters/" class="md-tabs__link">
          
  
    
  
  Tutorials

        </a>
      </li>
    
  

    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../mkdocs/contributing/" class="md-tabs__link">
          
  
    
  
  Notes

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="MindOCR Docs" class="md-nav__button md-logo" aria-label="MindOCR Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    MindOCR Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/mindspore-lab/mindocr" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    mindspore-lab/mindocr
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Model Zoo
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Model Zoo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mkdocs/modelzoo_training/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Training
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../inference/mindocr_models_list/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inference - MindOCR Models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../inference/thirdparty_models_list/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inference - Third-party Models
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    1. Datasets
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            1. Datasets
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datasets/converters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dataset Preparation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../transform_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Transformation Mechanism
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2. Model Training
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            2. Model Training
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../yaml_configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Yaml Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../training_detection_custom_dataset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Text Detection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../training_recognition_custom_dataset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Text Recognition
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../distribute_train/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Distributed Training
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced_train/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advance Training
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    3. Inference and Deployment
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            3. Inference and Deployment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mkdocs/online_inference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python Online Inference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../inference/inference_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MindOCR Offline Inference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../inference/mindocr_models_list/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inference - MindOCR Models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../inference/thirdparty_models_list/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inference - Third-party Models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../inference/convert_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Conversion
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    4. Developer Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            4. Developer Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mkdocs/customize_dataset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Customize Dataset
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mkdocs/customize_data_transform/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Customize Data Transformation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mkdocs/customize_model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Customize a New Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mkdocs/customize_postprocess/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Customize Postprocessing Method
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Notes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mkdocs/contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#frequently-asked-questions" class="md-nav__link">
    <span class="md-ellipsis">
      Frequently Asked Questions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Frequently Asked Questions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#q1-undefined-symbol" class="md-nav__link">
    <span class="md-ellipsis">
      Q1 Undefined symbol
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q2-ascend-so-not-found" class="md-nav__link">
    <span class="md-ellipsis">
      Q2 Ascend so Not Found
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q3-ascend-error-message-a39999" class="md-nav__link">
    <span class="md-ellipsis">
      Q3 Ascend Error Message A39999
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q4-acl-open-device-0-failed" class="md-nav__link">
    <span class="md-ellipsis">
      Q4 acl open device 0 failed
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q5-fail-to-install-mindocr-dependency-on-windows" class="md-nav__link">
    <span class="md-ellipsis">
      Q5 Fail to install mindocr dependency on windows
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q6-runtimeerror-the-device-address-type-is-wrong-type-name-in-addresscpu-type-name-in-contextascend" class="md-nav__link">
    <span class="md-ellipsis">
      Q6 RuntimeError: The device address type is wrong: type name in address:CPU, type name in context:Ascend
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q7-problems-related-to-model-converting" class="md-nav__link">
    <span class="md-ellipsis">
      Q7 Problems related to model converting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q8-problems-related-to-inference" class="md-nav__link">
    <span class="md-ellipsis">
      Q8 Problems related to inference
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q9-training-speed-of-dbnet-not-as-fast-as-expexted" class="md-nav__link">
    <span class="md-ellipsis">
      Q9 Training speed of DBNet not as fast as expexted
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q10-error-about-libgomp-d22c30c5so100" class="md-nav__link">
    <span class="md-ellipsis">
      Q10 Error about libgomp-d22c30c5.so.1.0.0
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q11-dataset-pipeline-error-when-training-abinet-on-lmdb-dataset" class="md-nav__link">
    <span class="md-ellipsis">
      Q11 Dataset Pipeline Error when training abinet on lmdb dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q12-runtime-error-when-training-dbnet-on-synthtext-dataset" class="md-nav__link">
    <span class="md-ellipsis">
      Q12 Runtime Error when training dbnet on synthtext dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q13-failed-to-install-seqeval" class="md-nav__link">
    <span class="md-ellipsis">
      Q13 Failed to install seqeval
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q14-failed-to-install-lanms" class="md-nav__link">
    <span class="md-ellipsis">
      Q14 Failed to install lanms
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#frequently-asked-questions" class="md-nav__link">
    <span class="md-ellipsis">
      Frequently Asked Questions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Frequently Asked Questions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#q1-undefined-symbol" class="md-nav__link">
    <span class="md-ellipsis">
      Q1 Undefined symbol
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q2-ascend-so-not-found" class="md-nav__link">
    <span class="md-ellipsis">
      Q2 Ascend so Not Found
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q3-ascend-error-message-a39999" class="md-nav__link">
    <span class="md-ellipsis">
      Q3 Ascend Error Message A39999
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q4-acl-open-device-0-failed" class="md-nav__link">
    <span class="md-ellipsis">
      Q4 acl open device 0 failed
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q5-fail-to-install-mindocr-dependency-on-windows" class="md-nav__link">
    <span class="md-ellipsis">
      Q5 Fail to install mindocr dependency on windows
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q6-runtimeerror-the-device-address-type-is-wrong-type-name-in-addresscpu-type-name-in-contextascend" class="md-nav__link">
    <span class="md-ellipsis">
      Q6 RuntimeError: The device address type is wrong: type name in address:CPU, type name in context:Ascend
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q7-problems-related-to-model-converting" class="md-nav__link">
    <span class="md-ellipsis">
      Q7 Problems related to model converting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q8-problems-related-to-inference" class="md-nav__link">
    <span class="md-ellipsis">
      Q8 Problems related to inference
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q9-training-speed-of-dbnet-not-as-fast-as-expexted" class="md-nav__link">
    <span class="md-ellipsis">
      Q9 Training speed of DBNet not as fast as expexted
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q10-error-about-libgomp-d22c30c5so100" class="md-nav__link">
    <span class="md-ellipsis">
      Q10 Error about libgomp-d22c30c5.so.1.0.0
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q11-dataset-pipeline-error-when-training-abinet-on-lmdb-dataset" class="md-nav__link">
    <span class="md-ellipsis">
      Q11 Dataset Pipeline Error when training abinet on lmdb dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q12-runtime-error-when-training-dbnet-on-synthtext-dataset" class="md-nav__link">
    <span class="md-ellipsis">
      Q12 Runtime Error when training dbnet on synthtext dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q13-failed-to-install-seqeval" class="md-nav__link">
    <span class="md-ellipsis">
      Q13 Failed to install seqeval
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q14-failed-to-install-lanms" class="md-nav__link">
    <span class="md-ellipsis">
      Q14 Failed to install lanms
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/mindspore-lab/mindocr/edit/master/docs/en/tutorials/frequently_asked_questions.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/mindspore-lab/mindocr/raw/master/docs/en/tutorials/frequently_asked_questions.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


  <h1>FAQ</h1>

<h2 id="frequently-asked-questions">Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="#q1-undefined-symbol">Undefined symbol</a></li>
<li><a href="#q2-ascend-so-not-found">Ascend so Not Found</a></li>
<li><a href="#q3-ascend-error-message-a39999">Ascend Error Message A39999</a></li>
<li><a href="#q4-acl-open-device-0-failed">acl open device 0 failed</a></li>
<li><a href="#q5-fail-to-install-mindocr-dependency-on-windows">Fail to install mindocr dependency on windows</a></li>
<li><a href="#q6-runtimeerror-the-device-address-type-is-wrong-type-name-in-addresscpu-type-name-in-contextascend">RunTimeError:The device address tpe is wrong</a></li>
<li><a href="#q7-problems-related-to-model-converting">Problems related to model converting</a></li>
<li><a href="#q8-problems-related-to-inference">Problems related to inference</a></li>
<li><a href="#q9-training-speed-of-dbnet-not-as-fast-as-expexted">Training speed of DBNet not as fast as expexted</a></li>
<li><a href="#q10-error-about-libgomp-d22c30c5so100">Error about libgomp-d22c30c5.so.1.0.0</a></li>
<li><a href="#q11-dataset-pipeline-error-when-training-abinet-on-lmdb-dataset">Dataset Pipeline Error when training abinet on lmdb dataset</a></li>
<li><a href="#q12-runtime-error-when-training-dbnet-on-synthtext-dataset">Runtime Error when training dbnet on synthtext dataset</a></li>
<li><a href="#q13-failed-to-install-seqeval">Failed to install seqeval</a></li>
<li><a href="#q14-failed-to-install-lanms">Failed to install lanms</a></li>
</ul>
<h3 id="q1-undefined-symbol">Q1 Undefined symbol<a class="headerlink" href="#q1-undefined-symbol" title="Permanent link">&para;</a></h3>
<ul>
<li><code>undefined symbol:_ZN9mindspore5tracel15GetDebugInfostrERKSt10shared_ptrINS_9DebugInfoEERKSsNS_13SourceLineTipE</code></li>
</ul>
<div class="highlight"><pre><span></span><code>Python<span class="w"> </span><span class="m">3</span>.7.16<span class="w"> </span><span class="o">(</span>default,<span class="w"> </span>Jan<span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="m">2023</span>,<span class="w"> </span><span class="m">22</span>:20:44<span class="o">)</span>
<span class="o">[</span>GCC<span class="w"> </span><span class="m">11</span>.2.0<span class="o">]</span><span class="w"> </span>::<span class="w"> </span>Anaconda,<span class="w"> </span>Inc.<span class="w"> </span>on<span class="w"> </span>linux
Type<span class="w"> </span><span class="s2">&quot;help&quot;</span>,<span class="w"> </span><span class="s2">&quot;copyright&quot;</span>,<span class="w"> </span><span class="s2">&quot;credits&quot;</span><span class="w"> </span>or<span class="w"> </span><span class="s2">&quot;license&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>more<span class="w"> </span>infommation.
&gt;&gt;&gt;<span class="w"> </span>import<span class="w"> </span>mindspore
&gt;&gt;&gt;<span class="w"> </span>import<span class="w"> </span>mindspore<span class="w"> </span>lite
Traceback<span class="w"> </span><span class="o">(</span>most<span class="w"> </span>recent<span class="w"> </span>call<span class="w"> </span>last<span class="o">)</span>:
File<span class="w"> </span><span class="s2">&quot;&lt;stdin&gt;&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">1</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>&lt;module&gt;
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/root/miniconda3/envs/xxx/lib/python3.7/site-packages/mindspore_lite/_init_.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">26</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>&lt;module&gt;
<span class="w">      </span>from<span class="w"> </span>mindspore<span class="w"> </span>lite.context<span class="w"> </span>import<span class="w"> </span>Context
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/root/miniconda3/envs/xxx/lib/python3.7/site-packages/mindspore_lite/context.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">22</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>&lt;module&gt;
<span class="w">      </span>from<span class="w"> </span>mindspore<span class="w"> </span>lite.lib<span class="w"> </span>import-c<span class="w"> </span>lite<span class="w"> </span>wrapper
ImportError:<span class="w"> </span>xxxx/mindspore-lite-2.2.0-linux-x64/tools/converter/lib/libmindspore_converter.so:<span class="w"> </span>undefined<span class="w"> </span>symbol:_ZN9mindspore5tracel15GetDebugInfostrERKSt10shared_ptrINS_9DebugInfoEERKSsNS_13SourceLineTipE
</code></pre></div>
<ul>
<li><code>undefined symbol: _ZN9mindspore12label_manage23GetGlobalTraceLabelTypeEv</code></li>
</ul>
<div class="highlight"><pre><span></span><code>Python<span class="w"> </span><span class="m">3</span>.7.16<span class="w"> </span><span class="o">(</span>default,<span class="w"> </span>Jan<span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="m">2023</span>,<span class="w"> </span><span class="m">22</span>:20:44<span class="o">)</span>
<span class="o">[</span>GCC<span class="w"> </span><span class="m">11</span>.2.0<span class="o">]</span><span class="w"> </span>::<span class="w"> </span>Anaconda,<span class="w"> </span>Inc.<span class="w"> </span>on<span class="w"> </span>linux
Type<span class="w"> </span><span class="s2">&quot;help&quot;</span>,<span class="w"> </span><span class="s2">&quot;copyright&quot;</span>.<span class="w"> </span><span class="s2">&quot;credits&quot;</span><span class="w"> </span>or<span class="w"> </span><span class="s2">&quot;license&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>more<span class="w"> </span>infommation.
&gt;&gt;&gt;<span class="w"> </span>import<span class="w"> </span>mindspore_lite
&gt;&gt;&gt;<span class="w"> </span>import<span class="w"> </span>mindspore
Traceback<span class="w"> </span><span class="o">(</span>most<span class="w"> </span>recent<span class="w"> </span>call<span class="w"> </span>last<span class="o">)</span>:
File<span class="w"> </span><span class="s2">&quot;&lt;stdin&gt;&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">1</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>&lt;module&gt;
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/ root/miniconda3/envs/xxx/1ib/python3.7/site-packages/mindspore/_init_.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">18</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>&lt;module&gt;
<span class="w">      </span>from<span class="w"> </span>mindspore.run<span class="w"> </span>check<span class="w"> </span>import<span class="w"> </span>run<span class="w"> </span>check
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/root/miniconda3/envs/xxx/lib/python3.7/site-packages/mindspore/ run_check/_init_.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">17</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>&lt;module&gt;
<span class="w">      </span>from<span class="w"> </span>.<span class="w"> </span>check_version<span class="w"> </span>import<span class="w"> </span>check_version_and_env_config
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/root/miniconda3/envs/xxx/lib/python3.7/site-packages/mindspo re/run_check/check version.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">29</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>&lt;module&gt;
<span class="w">      </span>from<span class="w"> </span>mindspore._c_expression<span class="w"> </span><span class="s2">&quot;import MSContext, ms_ctx_param</span>
<span class="s2">ImportError: xxxx/mindspore-lite-2.2.0-linux-x64/tools/converter/lib/libmindspore_converter.so: undefined symbol: _ZN9mindspore12label_manage23GetGlobalTraceLabelTypeEv</span>
</code></pre></div>
<ul>
<li><code>undefined symbol: _ZNK9mindspore6kernel15KernelBuildInfo8TostringEv</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">[</span>WARNING<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">20788</span>,<span class="w"> </span>7f897f04ff40,<span class="w"> </span>converter_lite<span class="o">)</span><span class="w"> </span>:2023-10-19-07:24:<span class="w"> </span><span class="m">10</span>.858.973<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/opt<span class="w"> </span>imizer/common/fommat_utils.cc:385<span class="o">]</span><span class="w"> </span>ConvertAbstractFommatShape<span class="o">]</span><span class="w"> </span>abstract<span class="w"> </span>must<span class="w"> </span>be<span class="w"> </span>a<span class="w"> </span>tensor,<span class="w"> </span>but<span class="w"> </span>got:<span class="w"> </span>ValueAny.
<span class="o">[</span>WARNING<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">20788</span>,7f897f04ff40,<span class="w"> </span>converter_lite<span class="o">)</span><span class="w"> </span>:2023-10-19-07:24:<span class="w"> </span><span class="m">10</span>.858.998<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/optimizer/common/gllo_utils.cc:<span class="w"> </span><span class="m">1071</span><span class="o">]</span><span class="w"> </span>GenTransposeNode<span class="o">]</span><span class="w"> </span>Convertabstract<span class="w"> </span>failed<span class="w"> </span><span class="k">for</span><span class="w"> </span>node:<span class="w"> </span>args0_nh2nc
<span class="o">[</span>WARNING<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">20788</span>,7f897fO04ff40,<span class="w"> </span>converter_lite<span class="o">)</span><span class="w"> </span>:2023-10-19-07:24:<span class="w"> </span><span class="m">11</span>.035.069<span class="w"> </span><span class="o">[</span>mindspore/lite/src/extendrt/cxx_api/dlutils.h:124<span class="o">]</span><span class="w"> </span>DLSopen<span class="o">]</span><span class="w"> </span>dlopen<span class="w"> </span>/xxx/mindspore/to0ls/converter/lib/libascend<span class="w"> </span>pass<span class="w"> </span>plugin.so<span class="w"> </span>failed,<span class="w"> </span>error:<span class="w"> </span>/xxx/mindspore/tools/converter/1ib/libmslite_shared<span class="w"> </span>lib.s0:<span class="w"> </span>undefined<span class="w"> </span>symbol:<span class="w"> </span>_ZNK9mindspore6kernel15KernelBuildInfo8TostringEv

<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">20788</span>,7f897f04ff40,<span class="w"> </span>converter_lite<span class="o">)</span><span class="w"> </span>:2023-10-19-07:24:<span class="w"> </span><span class="m">11</span>.035.121<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/adapter/acl/plugin/acl_pass_plugin.cc:86<span class="o">]</span><span class="w"> </span>CreateAclPassInner<span class="o">]</span><span class="w"> </span>DLSopen<span class="w"> </span>failed,<span class="w"> </span>so<span class="w"> </span>path:<span class="w"> </span>/xxx/mindspore-1ite-2.2.0.20231019-1inux-x64/tools/converter/lib/1ibascend_pass_plugin.so,<span class="w"> </span>ret:<span class="w"> </span>dlopen<span class="w"> </span>/xxx/mindspore/tools/converter/lib/libascend_pass_plugin.so<span class="w"> </span>failed,<span class="w"> </span>error:<span class="w"> </span>/xxx/mindspore/tools/converter/lib/libmslite<span class="w"> </span>shared<span class="w"> </span>lib.so:<span class="w"> </span>undefined<span class="w"> </span>symbol:<span class="w"> </span>_ZNK9mindspore6kernel15KernelBuildInfo8TostringEv
</code></pre></div>
<p>The problems occur due to the mismatch of <code>mindspore</code> python whl package, <code>mindspore_lite</code> python whl package and<code>mindspore_lite</code> tar package. Please check the following items according <a href="https://www.mindspore.cn/install/en">MindSpore download</a> and <a href="https://www.mindspore.cn/lite/docs/en/master/use/downloads.html">MindSpore Lite download</a>:</p>
<ul>
<li>Consistent version of <code>mindspore</code>, <code>mindspore_lite</code>, e.g. 2.2.0</li>
<li>Consistent version of <code>mindspore_lite</code> whl and <code>mindspore_lite</code> tar package, e.g. 2.2.0</li>
<li>Both <code>mindspore_lite</code> whl package and <code>mindspore_lite</code> tar package are Cloud-side</li>
</ul>
<p>For example, the following combination of packages is suitable when the platform is linux x86_64 with Ascend</p>
<ul>
<li><code>mindspore_lite whl</code>: <a href="https://ms-release.obs.cn-north-4.myhuaweicloud.com/2.2.0/MindSpore/lite/release/linux/x86_64/cloud_fusion/python37/mindspore_lite-2.2.0-cp37-cp37m-linux_x86_64.whl">mindspore_lite-2.2.0-cp37-cp37m-linux_x86_64.whl</a></li>
<li><code>mindspore_lite tar.gz</code>: <a href="https://ms-release.obs.cn-north-4.myhuaweicloud.com/2.2.0/MindSpore/lite/release/linux/x86_64/cloud_fusion/python37/mindspore-lite-2.2.0-linux-x64.tar.gz">mindspore-lite-2.2.0-linux-x64.tar.gz</a></li>
<li><code>mindspore whl</code>: <a href="https://ms-release.obs.cn-north-4.myhuaweicloud.com/2.2.0/MindSpore/unified/x86_64/mindspore-2.2.0-cp37-cp37m-linux_x86_64.whl">mindspore-2.2.0-cp37-cp37m-linux_x86_64.whl</a></li>
</ul>
<h3 id="q2-ascend-so-not-found">Q2 Ascend so Not Found<a class="headerlink" href="#q2-ascend-so-not-found" title="Permanent link">&para;</a></h3>
<ul>
<li><code>dlopen mindspore_lite/lib/libascend_kernel_plugin.so</code>, No such file or directory</li>
</ul>
<div class="highlight"><pre><span></span><code>File<span class="w"> </span><span class="s2">&quot;/home/xxx/miniconda3/envs/yyy/lib/python3.8/site-packages/mindspore_lite/model.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">95</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>warpper
<span class="w">  </span><span class="k">return</span><span class="w"> </span>func<span class="o">(</span>*args,<span class="w"> </span>**kwargs<span class="o">)</span>
File<span class="w"> </span><span class="s2">&quot;/home/xxx/miniconda3/envs/yyy/lib/python3.8/site-packages/mindspore_lite/model.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">235</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>build_from_file
<span class="w">  </span>raise<span class="w"> </span>RuntimeError<span class="o">(</span>f<span class="s2">&quot;build from_file failed! Error is {ret.Tostring()}&quot;</span><span class="o">)</span>
RuntimeError:<span class="w"> </span>build_from_file<span class="w"> </span>failed!<span class="w"> </span>Error<span class="w"> </span>is<span class="w"> </span>Common<span class="w"> </span>error<span class="w"> </span>code.
<span class="o">[</span>WARNING<span class="o">]</span><span class="w"> </span>ME<span class="o">(</span><span class="m">15411</span>,7f07f56be100,<span class="w"> </span>python<span class="o">)</span><span class="w"> </span>:<span class="w"> </span><span class="m">2023</span>-10-16-00:51:42.509.780<span class="w"> </span><span class="o">[</span>mindspore/lite/src/extend<span class="w"> </span>rt/cxx_api/dlutils.h:124<span class="o">]</span><span class="w"> </span>DLSopen<span class="o">]</span>
dlopen<span class="w"> </span>/home/xxx/miniconda3/envs/yyy/lib/python3.8/site-packages/mindspore_lite/lib/libascend_kernel_plugin.so<span class="w"> </span>failed,<span class="w"> </span>error:<span class="w"> </span>libacl_cblas.so:<span class="w"> </span>cannot<span class="w"> </span>open<span class="w"> </span>shared<span class="w"> </span>object<span class="w"> </span>file:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>ME<span class="o">(</span><span class="m">15411</span>,7f07f56be100,<span class="w"> </span>python<span class="o">)</span><span class="w"> </span>:2023-10-16-00:51:42.509.877<span class="w"> </span><span class="o">[</span>mindspo<span class="w"> </span>re/lite/src/extendrt/kernel/ascend/plugin/ascend_allocator_plugin.cc:70<span class="o">]</span><span class="w"> </span>Register<span class="o">]</span><span class="w"> </span>DLSopen<span class="w"> </span>failed,<span class="w"> </span>so<span class="w"> </span>path:<span class="w"> </span>/home/xxx/miniconda3/envs/<span class="w"> </span>yyy/lib/python3.8/site-packages/mindspore_lite/lib/libascend_kernel_plugin.so<span class="w"> </span>,<span class="w"> </span>func<span class="w"> </span>name:<span class="w"> </span>CreateAclAllocator.<span class="w"> </span>err:<span class="w"> </span>dlopen<span class="w"> </span>/home/xxx/miniconda3/envs/yyy/lib/python3.8/site-packages/mindspore_lite/lib/libascend_<span class="w"> </span>kernel_plugin.so<span class="w"> </span>failed,<span class="w"> </span>error:<span class="w"> </span>libacl_cblas.so:<span class="w"> </span>cannot<span class="w"> </span>open<span class="w"> </span>shared<span class="w"> </span>object<span class="w"> </span>file:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>ME<span class="o">(</span><span class="m">15411</span>,7f07f56be100,<span class="w"> </span>python<span class="o">)</span>:2023-10-16-00:51:42.509.893<span class="w"> </span><span class="o">[</span>mindspore/lite/src/extendrt/infer_session.cc:66<span class="o">]</span><span class="w"> </span>HandleContext<span class="o">]</span><span class="w"> </span>failed<span class="w"> </span>register<span class="w"> </span>ascend<span class="w"> </span>allocator<span class="w"> </span>plugin.
...
raise<span class="w"> </span>RuntimeError<span class="o">(</span>f<span class="s2">&quot;build_from_file failed! Error is {ret.ToString()}&quot;</span><span class="o">)</span>
RuntimeError:<span class="w"> </span>build_from_file<span class="w"> </span>failed!<span class="w"> </span>Error<span class="w"> </span>is<span class="w"> </span>Common<span class="w"> </span>error<span class="w"> </span>code.
</code></pre></div>
<p>This problem occur when <code>libascend_kernel plugin.so</code> is not successfully added to environment variables(<code>LD_LIBRARY_PATH</code>), which contained in <code>mindspore_lite</code> tar package. The solution is as follows:</p>
<ol>
<li>
<p>Check <code>mindspore_lite</code> tar package has been installed. If not, please follow the <a href="https://www.mindspore.cn/lite/docs/en/master/use/downloads.html">MindSpore Lite download</a>, install tar package and whl package. Please make sure the packages are Clound-side and support Ascend platform. See <a href="https://www.mindspore.cn/install/en">MindSpore download</a> for details</p>
</li>
<li>
<p>Find and move to the <code>mindspore_lite</code> installation path, like <code>/your_path_to/mindspore-lite</code></p>
</li>
<li>
<p>Run command <code>find ./ -name libascend_kernel_plugin.so</code> to find the so file, and you will get the following path:</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code>./runtime/lib/libascend_kernel_plugin.so
</code></pre></div>
<ol start="4">
<li>Add the path to to environment variables:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$LITE_HOME</span>/runtime/lib:<span class="nv">$LD_LIBRARY_PATH</span>
</code></pre></div>
<ul>
<li><code>Load dynamic library: libmindspore_ascend.so.2 failed. liboptiling.so: cannot open shared object file: No such file or directory</code></li>
</ul>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;import mindspore;mindspore.set_device(&#39;Ascend&#39;);mindspore.run_check()&quot;</span>
<span class="o">[</span>WARNING<span class="o">]</span><span class="w"> </span>ME<span class="o">(</span><span class="m">60105</span>:13981374421<span class="w"> </span><span class="m">1776</span>,<span class="w"> </span>MainProcess<span class="o">)</span>:2023-10-25-08:<span class="w"> </span><span class="m">14</span>:33.640.411<span class="w"> </span><span class="o">[</span>mindspore/run_check/_check_version.py:348<span class="o">]</span><span class="w"> </span>Using<span class="w"> </span>custom<span class="w"> </span>Ascend<span class="w"> </span>AI<span class="w"> </span>software<span class="w"> </span>package<span class="w"> </span><span class="o">(</span>Ascend<span class="w"> </span>Data<span class="w"> </span>Center<span class="w"> </span>Solution<span class="o">)</span><span class="w"> </span>path,<span class="w"> </span>package<span class="w"> </span>version<span class="w"> </span>checking<span class="w"> </span>is<span class="w"> </span>skipped.<span class="w"> </span>Please<span class="w"> </span>make<span class="w"> </span>sure<span class="w"> </span>Ascend<span class="w"> </span>AI<span class="w"> </span>software<span class="w"> </span>package<span class="w"> </span><span class="o">(</span>Ascend<span class="w"> </span>Data<span class="w"> </span>Center<span class="w"> </span>Solution<span class="o">)</span><span class="w"> </span>version<span class="w"> </span>is<span class="w"> </span>supported.<span class="w"> </span>For<span class="w"> </span>details,<span class="w"> </span>refer<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>installation<span class="w"> </span>guidelines<span class="w"> </span>https://www.mindspore.cn/install
Traceback<span class="w"> </span><span class="o">(</span>most<span class="w"> </span>recent<span class="w"> </span>call<span class="w"> </span>last<span class="o">)</span>:
File<span class="w"> </span><span class="s2">&quot;&lt;string&gt;&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">1</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>module&gt;
File<span class="w"> </span><span class="s2">&quot;/xxx/py37/lib/python3.7/site-packages/mindspore/_checkparam.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">1313</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>wrapper
<span class="w">  </span><span class="k">return</span><span class="w"> </span>func<span class="o">(</span>*args,<span class="w"> </span>**kwargs<span class="o">)</span>
File<span class="w"> </span><span class="s2">&quot;/xxx/py37/1ib/python3.7/site-packages/mindspore/context.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">1456</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>set_context
<span class="w">  </span>ctx.set_device_target<span class="o">(</span>kwargs<span class="o">[</span><span class="s1">&#39;device target&#39;</span><span class="o">])</span>
File<span class="w"> </span><span class="s2">&quot;/xxx/py37/lib/python3.7/site-packages/mindspore/context.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">381</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>set_device_target
<span class="w">  </span>self.set_param<span class="o">(</span>ms_ctx_param.device_target,<span class="w"> </span>target<span class="o">)</span>
File<span class="w"> </span><span class="s2">&quot;/xxx/py37/lib/python3.7/site-packages/mindspore/context.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">175</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>set_param
<span class="w">  </span>self._context_handle.set_param<span class="o">(</span>param,<span class="w"> </span>value<span class="o">)</span>
RuntimeError:<span class="w"> </span>Unsupported<span class="w"> </span>device<span class="w"> </span>target<span class="w"> </span>Ascend.<span class="w"> </span>This<span class="w"> </span>process<span class="w"> </span>only<span class="w"> </span>supports<span class="w"> </span>one<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span><span class="o">[</span><span class="s1">&#39;CPU&#39;</span><span class="o">]</span>.<span class="w"> </span>Please<span class="w"> </span>check<span class="w"> </span>whether<span class="w"> </span>the<span class="w"> </span>Ascend<span class="w"> </span>environment<span class="w"> </span>is<span class="w"> </span>installed<span class="w"> </span>and<span class="w"> </span>configured<span class="w"> </span>correctly.<span class="w"> </span>and<span class="w"> </span>check<span class="w"> </span>whether<span class="w"> </span>current<span class="w"> </span>mindspore<span class="w"> </span>wheel<span class="w"> </span>package<span class="w"> </span>was<span class="w"> </span>built<span class="w"> </span>with<span class="w"> </span><span class="s2">&quot;-e Ascend&quot;</span>.<span class="w"> </span>For<span class="w"> </span>details,<span class="w"> </span>please<span class="w"> </span>refer<span class="w"> </span>to<span class="w"> </span><span class="s2">&quot;Device load error message&quot;</span>.

----------------------------------------------------
-<span class="w"> </span>Device<span class="w"> </span>load<span class="w"> </span>error<span class="w"> </span>message:
----------------------------------------------------
Load<span class="w"> </span>dynamic<span class="w"> </span>library:<span class="w"> </span>libmindspore_ascend.so.2<span class="w"> </span>failed.<span class="w"> </span>liboptiling.so:<span class="w"> </span>cannot<span class="w"> </span>open<span class="w"> </span>shared<span class="w"> </span>object<span class="w"> </span>file:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
Load<span class="w"> </span>dynamic<span class="w"> </span>library:<span class="w"> </span>1ibmindspore<span class="w"> </span>ascend.so.1<span class="w"> </span>failed.<span class="w"> </span>liboptiling.so:<span class="w"> </span>cannot<span class="w"> </span>open<span class="w"> </span>shared<span class="w"> </span>object<span class="w"> </span>file:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
----------------------------------------------------
...
</code></pre></div>
<p>This problem occur when <code>liboptiling.so</code> is not successfully added to environment variables(<code>LD_LIBRARY_PATH</code>). The solution is as follows:</p>
<ol>
<li>
<p>Check <code>CANN</code> tar package has been installed. If not, please follow the <a href="https://www.mindspore.cn/install/en#installing-ascend-ai-processor-software-package">Installing Ascend AI processor software package</a> and install CANN</p>
</li>
<li>
<p>Find and move to the <code>CANN</code> installation path, like <code>/your_path_to/cann</code></p>
</li>
<li>
<p>Run command <code>find ./ -name liboptiling.so</code> to find the so file, and you will get the following path:</p>
<div class="highlight"><pre><span></span><code>./CANN-7.0/opp/built-in/op_impl/ai_core/tbe/op_tiling/lib/linux/x86_64/liboptiling.so
./CANN-7.0/opp/built-in/op_impl/ai_core/tbe/op_tiling/lib/linux/aarch64/liboptiling.so
./CANN-7.0/opp/built-in/op_impl/ai_core/tbe/op_tiling/lib/minios/aarch64/liboptiling.so
</code></pre></div>
</li>
<li>
<p>Add the path to to environment variables(e.g. x86_64 system):</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$ASCEND_HOME</span>/CANN-7.0/opp/built-in/op_impl/ai_core/tbe/op_tiling/lib/linux/x86_64/:<span class="nv">$LD_LIBRARY_PATH</span>
</code></pre></div>
<p>You will find the following message if the problem is solved:</p>
<div class="highlight"><pre><span></span><code>The<span class="w"> </span>result<span class="w"> </span>of<span class="w"> </span>multiplication<span class="w"> </span>calculation<span class="w"> </span>is<span class="w"> </span>correct.<span class="w"> </span>MindSpore<span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>installed<span class="w"> </span>on<span class="w"> </span>platform<span class="w"> </span><span class="o">[</span>Ascend<span class="o">]</span><span class="w"> </span>successfully!
</code></pre></div>
</li>
</ol>
<ul>
<li><code>Load dynamic library: libmindspore_ascend.so.2 failed. libaicpu_ascend_engine.so: cannot open shared object file: No such file or directory</code></li>
</ul>
<div class="highlight"><pre><span></span><code>RuntimeError:<span class="w"> </span>Unsupported<span class="w"> </span>device<span class="w"> </span>target<span class="w"> </span>Ascend.<span class="w"> </span>This<span class="w"> </span>process<span class="w"> </span>only<span class="w"> </span>supports<span class="w"> </span>one<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span><span class="o">[</span><span class="s1">&#39;CPU&#39;</span><span class="o">]</span>.<span class="w"> </span>Please<span class="w"> </span>check<span class="w"> </span>whether<span class="w"> </span>the<span class="w"> </span>Ascend<span class="w"> </span>environment<span class="w"> </span>is<span class="w"> </span>installed<span class="w"> </span>and<span class="w"> </span>configured<span class="w"> </span>correctly.<span class="w"> </span>and<span class="w"> </span>check<span class="w"> </span>whether<span class="w"> </span>current<span class="w"> </span>mindspore<span class="w"> </span>wheel<span class="w"> </span>package<span class="w"> </span>was<span class="w"> </span>built<span class="w"> </span>with<span class="w"> </span><span class="s2">&quot;-e Ascend&quot;</span>.<span class="w"> </span>For<span class="w"> </span>details,<span class="w"> </span>please<span class="w"> </span>refer<span class="w"> </span>to<span class="w"> </span><span class="s2">&quot;Device load error message&quot;</span>.

----------------------------------------------------
-<span class="w"> </span>Device<span class="w"> </span>load<span class="w"> </span>error<span class="w"> </span>message:
----------------------------------------------------
Load<span class="w"> </span>dynamic<span class="w"> </span>library:<span class="w"> </span>libmindspore_ascend.so.2<span class="w"> </span>failed.<span class="w"> </span>libaicpu_ascend_engine.so:<span class="w"> </span>cannot<span class="w"> </span>open<span class="w"> </span>shared<span class="w"> </span>object<span class="w"> </span>file:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
Load<span class="w"> </span>dynamic<span class="w"> </span>library:<span class="w"> </span>libmindspore_ascend.so.1<span class="w"> </span>failed.<span class="w"> </span>libaicpu_ascend_engine.so:<span class="w"> </span>cannot<span class="w"> </span>open<span class="w"> </span>shared<span class="w"> </span>object<span class="w"> </span>file:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory

----------------------------------------------------
...
</code></pre></div>
<p>This problem occur when <code>libaicpu_ascend_engine.so</code> is not successfully added to environment variables(<code>LD_LIBRARY_PATH</code>). The solution is as follows:</p>
<ol>
<li>Check <code>CANN</code> tar package has been installed. If not, please follow the <a href="https://www.mindspore.cn/install/en#installing-ascend-ai-processor-software-package">Installing Ascend AI processor software package</a> and install CANN</li>
<li>Find and move to the <code>CANN</code> installation path, like <code>/your_path_to/cann</code></li>
<li>Run command <code>find ./ -name libaicpu_ascend_engine.so</code> to find the so file, and you will get the following path:</li>
</ol>
<div class="highlight"><pre><span></span><code>./CANN-7.0/x86_64-linux/lib64/plugin/opskernel/libaicpu_ascend_engine.so
./CANN-7.0/compiler/lib64/plugin/opskernel/libaicpu_ascend_engine.so
./latest/x86_64-linux/lib64/plugin/opskernel/libaicpu_ascend_engine.so
</code></pre></div>
<ol start="4">
<li>
<p>Add the path to to environment variables(e.g. x86_64 system):</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$ASCEND_HOME</span>/CANN-7.0/compiler/lib64/plugin/opskernel/:<span class="nv">$LD_LIBRARY_PATH</span>
</code></pre></div>
</li>
</ol>
<h3 id="q3-ascend-error-message-a39999">Q3 Ascend Error Message A39999<a class="headerlink" href="#q3-ascend-error-message-a39999" title="Permanent link">&para;</a></h3>
<ul>
<li>Error 1</li>
</ul>
<div class="highlight"><pre><span></span><code>----------------------------------------------------
-<span class="w"> </span>Ascend<span class="w"> </span>Error<span class="w"> </span>Message:
----------------------------------------------------
E39999:<span class="w"> </span>Inner<span class="w"> </span>Error!
E39999<span class="w"> </span>TsdOpen<span class="w"> </span>failed.<span class="w"> </span><span class="nv">devId</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span>tdt<span class="w"> </span><span class="nv">error</span><span class="o">=</span><span class="m">31</span><span class="o">[</span>FUNC:PrintfTsdError<span class="o">]</span><span class="w"> </span><span class="o">[</span>FILE:<span class="w"> </span>runtime.cc<span class="o">][</span>LINE:2060<span class="o">]</span>
<span class="w">     </span>TraceBack<span class="w"> </span><span class="o">(</span>most<span class="w"> </span>recent<span class="w"> </span>call<span class="w"> </span>last<span class="o">)</span>:
<span class="w">     </span>Start<span class="w"> </span>aicpu<span class="w"> </span>executor<span class="w"> </span>failed,<span class="w"> </span><span class="nv">retCode</span><span class="o">=</span>0x7020009<span class="w"> </span><span class="nv">devId</span><span class="o">=</span><span class="m">0</span><span class="o">[</span>FUNC<span class="w"> </span>:DeviceRetain<span class="o">][</span>FILE:<span class="w"> </span>runtime.cc<span class="o">][</span>LINE:2698<span class="o">]</span>
<span class="w">     </span>check<span class="w"> </span>param<span class="w"> </span>failed,<span class="w"> </span>dev<span class="w"> </span>can<span class="w"> </span>not<span class="w"> </span>be<span class="w"> </span>NULL!<span class="o">[</span>FUNC:PrimaryContextRetain<span class="o">][</span>FILE:<span class="w"> </span>runtime.cc<span class="o">][</span>LINE:2544<span class="o">]</span>
<span class="w">     </span>Check<span class="w"> </span>param<span class="w"> </span>failed,<span class="w"> </span>ctx<span class="w"> </span>can<span class="w"> </span>not<span class="w"> </span>be<span class="w"> </span>NULL!<span class="w"> </span><span class="o">[</span>FUNC:PrimaryContextRetain<span class="o">][</span>FILE:<span class="w"> </span>runtime.cc<span class="o">][</span>LINE:2571<span class="o">]</span>
<span class="w">     </span>Check<span class="w"> </span>param<span class="w"> </span>failed,<span class="w"> </span>context<span class="w"> </span>can<span class="w"> </span>not<span class="w"> </span>be<span class="w"> </span>null.<span class="o">[</span>FUNC:NewDevice<span class="o">][</span>FILE:api<span class="w"> </span>impl.cc<span class="o">][</span>LINE:1899<span class="o">]</span>
<span class="w">     </span>New<span class="w"> </span>device<span class="w"> </span>failed,<span class="w"> </span><span class="nv">retcode</span><span class="o">=</span>0x70<span class="w"> </span><span class="m">10006</span><span class="o">[</span>FUNC:SetDevice<span class="o">][</span>FILE:api_impL-cc<span class="o">][</span>LINE:1922<span class="o">]</span>
<span class="w">     </span>rtsetDevice<span class="w"> </span>execute<span class="w"> </span>failed,<span class="w"> </span><span class="nv">reason</span><span class="o">=[</span>device<span class="w"> </span>retain<span class="w"> </span>error<span class="o">][</span>FUNC:FuncErrorReason<span class="o">][</span>FILE<span class="w"> </span>:error<span class="w"> </span>message<span class="w"> </span>manage.ccl<span class="o">[</span>LINE:50<span class="o">]</span>
<span class="w">     </span>open<span class="w"> </span>device<span class="w"> </span><span class="m">0</span><span class="w"> </span>failed<span class="w"> </span>runtime<span class="w"> </span><span class="nv">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">507033</span>.<span class="o">[</span>FUNC:<span class="w"> </span>ReportCallError<span class="o">][</span>FILE:log_inner.cpp<span class="o">][</span>LINE:161<span class="o">]</span>

<span class="o">(</span>Please<span class="w"> </span>search<span class="w"> </span><span class="s2">&quot;Ascend Error Message&quot;</span><span class="w"> </span>at<span class="w"> </span>https://www.mindspore.cn<span class="w"> </span><span class="k">for</span><span class="w"> </span>error<span class="w"> </span>code<span class="w"> </span>description<span class="o">)</span>
</code></pre></div>
<ul>
<li>Error 2</li>
</ul>
<div class="highlight"><pre><span></span><code>----------------------------------------------------
-<span class="w"> </span>Ascend<span class="w"> </span>Error<span class="w"> </span>Message:
----------------------------------------------------
E39999:<span class="w"> </span>Inner<span class="w"> </span>Error!
E39999<span class="w"> </span>tsd<span class="w"> </span>client<span class="w"> </span><span class="nb">wait</span><span class="w"> </span>response<span class="w"> </span>fail,<span class="w"> </span>device<span class="w"> </span>response<span class="w"> </span>code<span class="o">[</span><span class="m">1</span><span class="o">]</span>.<span class="w"> </span>load<span class="w"> </span>aicpu<span class="w"> </span>ops<span class="w"> </span>package<span class="w"> </span>failed,<span class="w"> </span>device<span class="o">[</span>O<span class="o">]</span>,<span class="w"> </span>host<span class="w"> </span>pid<span class="o">[</span><span class="m">5653</span><span class="o">]</span>,<span class="w"> </span>error<span class="w"> </span>stack:
<span class="o">[</span>TSDaemon<span class="o">]</span><span class="w"> </span>checksum<span class="w"> </span>aicpu<span class="w"> </span>package<span class="w"> </span>failed,<span class="w"> </span><span class="nv">ret</span><span class="o">=</span><span class="m">103</span>,<span class="w"> </span><span class="o">[</span>tsd_common.cpp:2242:SaveProcessConfig<span class="o">]</span><span class="m">17580</span>
Check<span class="w"> </span>head<span class="w"> </span>tag<span class="w"> </span>failed,<span class="w"> </span><span class="nv">ret</span><span class="o">=</span><span class="m">279</span>,<span class="w"> </span><span class="o">[</span>package_worker.cpp:537:VerifyAicpuPackage<span class="o">]</span><span class="m">2369</span>
Verify<span class="w"> </span>Aicpu<span class="w"> </span>package<span class="w"> </span>failed,<span class="w"> </span>srcPathlIhome/HMHiAiuser/aicpu_kernels/vf0_5653_Ascend310P-aicpu_syskernels.tar.gz<span class="o">]</span>..<span class="o">[</span>package_worker.cpp:567:DecompressionAicpuPackage<span class="o">]</span><span class="m">2369</span>
Decompression<span class="w"> </span>AicpuPackage<span class="w"> </span><span class="o">[</span>/home/HwHiAiUser/aicpu_kernels/vf0_5653_Ascend310P-aicpu_syskernels.tar.gz<span class="o">]</span><span class="w"> </span>failed,<span class="w"> </span><span class="o">[</span>package_worker.cpp:218:LoadAICPUPackageForProcessMode<span class="o">]</span><span class="m">2369</span>
Load<span class="w"> </span>aicpu<span class="w"> </span>package<span class="w"> </span>path<span class="o">[</span>/home/HwHiAiUser/hdcd/device0/<span class="o">]</span><span class="w"> </span>fileName<span class="o">[</span><span class="w"> </span>5653_Ascend310P-aicpu_syskernels.tar.gz<span class="o">]</span><span class="w"> </span>failed,<span class="w"> </span><span class="o">[</span>inotify_watcher.cpp:311:HandleEvent<span class="o">]</span><span class="m">2369</span>
<span class="o">[</span>TSDaemon<span class="o">]</span><span class="w"> </span>load<span class="w"> </span>aicpu<span class="w"> </span>ops<span class="w"> </span>package<span class="w"> </span>failed,<span class="w"> </span>device<span class="o">[</span><span class="m">0</span><span class="o">]</span>,<span class="w"> </span>host<span class="w"> </span>pid<span class="o">[</span><span class="m">5653</span><span class="o">]</span>,<span class="w"> </span><span class="o">[</span>tsd_common.cpp:2054:CheckAndHandleTimeout<span class="o">]</span><span class="m">2374</span>
<span class="o">[</span>FUNC:WaitRsp<span class="o">][</span>FILE:process_mode_manager.cpp<span class="o">][</span>LINE:270<span class="o">]</span>
<span class="w">  </span>TraceBack<span class="w"> </span><span class="o">(</span>most<span class="w"> </span>recent<span class="w"> </span>call<span class="w"> </span>last<span class="o">)</span>:
<span class="w">  </span>TsdOpen<span class="w"> </span>failed.<span class="w"> </span><span class="nv">devId</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span>tdt<span class="w"> </span><span class="nv">error</span><span class="o">=</span><span class="m">31</span><span class="o">[</span>FUNC:PrintfTsdError<span class="o">]</span><span class="w"> </span><span class="o">[</span>FILE:<span class="w"> </span>runtime.cc<span class="o">][</span>LINE:2060<span class="o">]</span>
<span class="w">  </span>Start<span class="w"> </span>aicpu<span class="w"> </span>executor<span class="w"> </span>failed,<span class="w"> </span><span class="nv">retCode</span><span class="o">=</span>Ox7020009<span class="w"> </span><span class="nv">devId</span><span class="o">=</span><span class="m">0</span><span class="o">[</span>FUNC:DeviceRetain<span class="o">][</span>FILE:<span class="w"> </span>runtime.cc<span class="o">]</span><span class="w"> </span><span class="o">[</span>LINE:2698<span class="o">]</span>
<span class="w">  </span>Check<span class="w"> </span>param<span class="w"> </span>failed,<span class="w"> </span>dev<span class="w"> </span>can<span class="w"> </span>not<span class="w"> </span>be<span class="w"> </span>NULL!<span class="w"> </span><span class="o">[</span>FUNC:PrimaryContextRetain<span class="o">]</span><span class="w"> </span><span class="o">[</span>FILE:<span class="w"> </span>runtime.cc<span class="o">][</span>LINE:2544<span class="o">]</span>
<span class="w">  </span>Check<span class="w"> </span>param<span class="w"> </span>failed,<span class="w"> </span>ctx<span class="w"> </span>can<span class="w"> </span>not<span class="w"> </span>be<span class="w"> </span>NULL!<span class="w"> </span><span class="o">[</span>FUNC:PrimaryContextRetain<span class="w"> </span>J<span class="o">[</span>FILE:<span class="w"> </span>runtime.cc<span class="o">][</span>LINE:2571<span class="o">]</span>
<span class="w">  </span>Check<span class="w"> </span>param<span class="w"> </span>failed,<span class="w"> </span>context<span class="w"> </span>can<span class="w"> </span>not<span class="w"> </span>be<span class="w"> </span>null.<span class="w"> </span><span class="o">[</span>FUNC:NewDevice<span class="o">]</span><span class="w"> </span><span class="o">[</span>FILE:api_impl.cc<span class="o">][</span>LINE:<span class="w"> </span><span class="m">1893</span><span class="o">]</span>
<span class="w">  </span>New<span class="w"> </span>device<span class="w"> </span>failed,<span class="w"> </span><span class="nv">retCode</span><span class="o">=</span>0x7010006<span class="o">[</span>FUNC:SetDevice<span class="o">]</span><span class="w"> </span><span class="o">[</span>FILE:api<span class="w"> </span>impl.cc<span class="o">][</span>LINE:1916<span class="o">]</span>
<span class="w">  </span>rtSetDevice<span class="w"> </span>execute<span class="w"> </span>failed,<span class="w"> </span><span class="nv">reason</span><span class="o">=[</span>device<span class="w"> </span>retain<span class="w"> </span>errorl<span class="o">[</span>FUNC:FuncErrorReason<span class="o">]</span><span class="w"> </span><span class="o">[</span>FILE:error_message_manage.cc<span class="o">][</span>LINE:50<span class="o">]</span>
<span class="w">  </span>open<span class="w"> </span>device<span class="w"> </span><span class="m">0</span><span class="w"> </span>failed,<span class="w"> </span>runtime<span class="w"> </span><span class="nv">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">507033</span>.<span class="w"> </span><span class="o">[</span>FUNC:ReportCalLError<span class="o">][</span>FILE:log_inner.cpp<span class="o">]</span>ILINE:161<span class="o">]</span>
<span class="o">(</span>Please<span class="w"> </span>search<span class="w"> </span><span class="s2">&quot;Ascend Error Message&quot;</span><span class="w"> </span>at<span class="w"> </span>https://www.mindspore.cn<span class="w"> </span><span class="k">for</span><span class="w"> </span>error<span class="w"> </span>code<span class="w"> </span>description<span class="o">)</span>
</code></pre></div>
<p>Potential Reason:</p>
<ul>
<li>
<p>The mismatch of Ascend driver and CANN</p>
</li>
<li>
<p>Unsuccessfully configuration of environment variables make aicpu fail, try to add the following items to environment variables(<code>LD_LIBRARY_PATH</code>):</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">ASCEND_OPP_PATH</span><span class="o">=</span><span class="si">${</span><span class="nv">ASCEND_HOME</span><span class="si">}</span>/latest/opp
<span class="nb">export</span><span class="w"> </span><span class="nv">ASCEND_AICPU_PATH</span><span class="o">=</span><span class="si">${</span><span class="nv">ASCEND_OPP_PATH</span><span class="si">}</span>/..
</code></pre></div>
<h3 id="q4-acl-open-device-0-failed">Q4 <code>acl open device 0 failed</code><a class="headerlink" href="#q4-acl-open-device-0-failed" title="Permanent link">&para;</a></h3>
<p>Problem <code>acl open device 0 failed</code> may occur when doing inference. For example</p>
<div class="highlight"><pre><span></span><code>benchmark<span class="w"> </span>--modelFile<span class="o">=</span>dbnet_mobilenetv3_lite.mindir<span class="w"> </span>--device<span class="o">=</span>Ascend<span class="w"> </span>--inputShapes<span class="o">=</span><span class="s1">&#39;1,3,736,1280&#39;</span><span class="w"> </span>--loopCount<span class="o">=</span><span class="m">100</span><span class="w"> </span>-<span class="w"> </span>-wammUpLoopCount<span class="o">=</span><span class="m">10</span>
<span class="nv">ModelPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>dbnet_mobilenetv3_lite.mindir
<span class="nv">ModelType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>MindIR
<span class="nv">InDatapath</span><span class="w"> </span><span class="o">=</span>
<span class="nv">GroupInfoFile</span><span class="w"> </span><span class="o">=</span>
<span class="nv">ConfigFilepath</span><span class="w"> </span><span class="o">=</span>
<span class="nv">InDataType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>bin
<span class="nv">LoopCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100</span>
<span class="nv">DeviceType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Ascend
<span class="nv">AccuracyThreshold</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>.5
<span class="nv">CosineDistanceThreshold</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>-1.1
<span class="nv">WarmUpLoopCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span>
<span class="nv">NumThreads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="nv">InterOpParallelNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>
<span class="nv">Fpl16Priority</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="w">   </span><span class="nv">EnableparalÍel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="nv">calibDataPath</span><span class="w"> </span><span class="o">=</span>
<span class="nv">EnableGLTexture</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="nv">cpuBindMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>HIGHER<span class="w"> </span>CPU
<span class="nv">CalibDataType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>FLOAT
Resize<span class="w"> </span>Dims:<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">736</span><span class="w"> </span><span class="m">1280</span>
start<span class="w"> </span>unified<span class="w"> </span>benchmark<span class="w"> </span>run
IERROR<span class="o">]</span><span class="w"> </span>ME<span class="w"> </span><span class="o">(</span><span class="m">26748</span>,7f6c73867fc0,<span class="w"> </span>benchmark<span class="o">)</span><span class="w"> </span>:2023-10-26-09:51<span class="w"> </span>:<span class="w"> </span><span class="m">54</span>.833.515<span class="w"> </span>Imindspore/lite/src/extend<span class="w"> </span>rt/kernel/ascend/model/model_infer.cc:59<span class="o">]</span><span class="w"> </span>Init<span class="o">]</span><span class="w"> </span>Acl<span class="w"> </span>open<span class="w"> </span>device<span class="w"> </span><span class="m">0</span><span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>ME<span class="w"> </span><span class="o">(</span><span class="m">26748</span>,7f6c73867fc0,benchmark<span class="o">)</span>:2023-10-26-09:51:54.833.573<span class="w"> </span><span class="o">[</span>mindspore/lite/src/extend<span class="w"> </span>rt/kernel/ascend/src/custom_ascend_kernel.cc:141<span class="o">]</span><span class="w"> </span>Init<span class="o">]</span><span class="w"> </span>Model<span class="w"> </span>i
nfer<span class="w"> </span>init<span class="w"> </span>failed.<span class="w">   </span><span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>ME<span class="w"> </span><span class="o">(</span><span class="m">26748</span>,<span class="w"> </span>7f6c73867fc0,benchmark<span class="o">)</span><span class="w"> </span>:2023-10-26-09:51:54.833.604<span class="w"> </span><span class="o">[</span>mindspore/lite/src/extendrt/session/single_op_session.cc:198<span class="o">]</span><span class="w"> </span>BuildCustomAscendKernelImpl<span class="o">]</span><span class="w"> </span>kernel<span class="w"> </span>init<span class="w"> </span>failed<span class="w"> </span>CustomAscend
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>ME<span class="w"> </span><span class="o">(</span><span class="m">26748</span>,7f6c73867fc0,<span class="w"> </span>benchmark<span class="o">)</span><span class="w"> </span>:2023-10-26-09:51<span class="w"> </span>:54.833.669<span class="w"> </span><span class="o">[</span>mindspore/li<span class="w"> </span>te/src/extendrt/session/single_op_sess<span class="w"> </span>ion.cc:220<span class="o">]</span><span class="w"> </span>BuildCustomAscendKernel<span class="o">]</span><span class="w"> </span>Build<span class="w"> </span>ascend<span class="w"> </span>kernel<span class="w"> </span>failed<span class="w"> </span><span class="k">for</span><span class="w"> </span>node:<span class="w"> </span>custom_0
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>ME<span class="w"> </span><span class="o">(</span><span class="m">26748</span>,7f6c73867fc0,benchmark<span class="o">)</span><span class="w"> </span>:2023-10-26-09:51<span class="w"> </span>:<span class="w"> </span><span class="m">54</span>.833.699<span class="w"> </span><span class="o">[</span>mindspore/lite/src/extend<span class="w"> </span>rt/session/single_op_session.cc:302<span class="o">]</span><span class="w"> </span>CompileGraph<span class="o">]</span><span class="w"> </span>Failed<span class="w"> </span>to<span class="w"> </span>Build<span class="w"> </span>custom<span class="w"> </span>ascend<span class="w"> </span>kernel
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>ME<span class="w"> </span><span class="o">(</span><span class="m">26748</span>,7f6c73867fc0,benchmark<span class="o">)</span><span class="w"> </span>:2023-10-26-09:51:54.833.727<span class="w"> </span><span class="o">[</span>mindspore/lite/s<span class="w"> </span>rc/extendrt/cxx_api/model/model_impl.cc:413<span class="o">]</span><span class="w"> </span>BuildByBufferImpl<span class="o">]</span><span class="w"> </span>compile<span class="w"> </span>graph<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>ME<span class="w"> </span><span class="o">(</span><span class="m">26748</span>,<span class="w"> </span>7f6c73867fc0,<span class="w"> </span>benchmark<span class="o">)</span>:2023-10-26-09:51:54.835.590<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/benchma<span class="w"> </span>rk/benchmark_unified_api.cc:1256<span class="o">]</span><span class="w"> </span>CompileGraph<span class="o">]</span><span class="w"> </span>ms_model_.Build<span class="w"> </span>failed<span class="w"> </span><span class="k">while</span><span class="w"> </span>running
IERROR<span class="o">]</span><span class="w"> </span>ME<span class="w"> </span><span class="o">(</span><span class="m">26748</span>,7f6c73867fc0,benchmark<span class="o">)</span><span class="w"> </span>:2023-10-26-09:51:54.835.627<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/benchma<span class="w"> </span>rk/benchmark_unified_api.cc:1325<span class="o">]</span><span class="w"> </span>RunBenchmark<span class="o">]</span><span class="w"> </span>Compile<span class="w"> </span>graph<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>ME<span class="o">(</span><span class="m">26748</span>,7f6c73867fc0,<span class="w"> </span>benchmark<span class="o">)</span>:2023-10-26-09:<span class="w"> </span><span class="m">51</span>:54.835.662<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/benchmark/<span class="w"> </span>run_benchmark.cc<span class="w"> </span>:78<span class="o">]</span><span class="w"> </span>RunBenchmark<span class="o">]</span><span class="w"> </span>Run<span class="w"> </span>Benchmark<span class="w"> </span>dbnet_mobilenetv3_lite.mindi<span class="w"> </span>r<span class="w"> </span>Failed<span class="w"> </span>:<span class="w"> </span>-1
ms_model_.Build<span class="w"> </span>failed<span class="w"> </span><span class="k">while</span><span class="w"> </span>running<span class="w"> </span>Run<span class="w"> </span>Benchmark<span class="w"> </span>dbnet<span class="w"> </span>mobilenetv3<span class="w"> </span>lite.mindir<span class="w"> </span>Failed<span class="w"> </span>:<span class="w"> </span>-1
</code></pre></div>
<p>This problem occur when <code>acllib</code> library is not successfully added to environment variables(<code>LD_LIBRARY_PATH</code>). try to add the following items to environment variables.</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">NPU_HOST_LIB</span><span class="o">=</span><span class="nv">$ASCEND_HOME</span>/latest/acllib/lib64/stub
<span class="nb">export</span><span class="w"> </span><span class="nv">DDK_PATH</span><span class="o">=</span><span class="nv">$ASCEND_HOME</span>/latest
<span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$ASCEND_HOME</span>/latest/acllib/lib64
<span class="nb">export</span><span class="w"> </span><span class="nv">ASCEND_AICPU_PATH</span><span class="o">=</span><span class="nv">$ASCEND_HOME</span>/latest/x86_64-linux
<span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$ASCEND_HOME</span>/latest/x86_64-linux/lib64:<span class="nv">$LD_LIBRARY_PATH</span>
</code></pre></div>
<h3 id="q5-fail-to-install-mindocr-dependency-on-windows">Q5 Fail to install mindocr dependency on windows<a class="headerlink" href="#q5-fail-to-install-mindocr-dependency-on-windows" title="Permanent link">&para;</a></h3>
<p>Running the following command on windows</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>git@gitee.com:mindspore-lab/mindocr.git
<span class="nb">cd</span><span class="w"> </span>mindocr
pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.
</code></pre></div>
<p>The error may occur with the following message, <code>lanms</code> package fail to install.</p>
<div class="highlight"><pre><span></span><code>FileNotFoundError:<span class="w"> </span><span class="o">[</span>WinError<span class="w"> </span><span class="m">2</span><span class="o">]</span><span class="w">  </span>the<span class="w"> </span>system<span class="w"> </span>cannot<span class="w"> </span>find<span class="w"> </span>the<span class="w"> </span>file<span class="w"> </span>specified.
</code></pre></div>
<p><code>lanma</code> from <a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2Fargman%2FEAST%2F">https://github.com/argman/EAST/</a>  on windows may not work, and linux platform is recommanded. You can try to use <code>lanms-neo</code> to replace <code>lanms</code> on windows. You may find the following error when installing <code>lanms-neo</code>:</p>
<div class="highlight"><pre><span></span><code>Looking<span class="w"> </span><span class="k">in</span><span class="w"> </span>indexes:<span class="w"> </span>https://pypi.tuna.tsinghua.edu.cn/simple
Collecting<span class="w"> </span>lanms-neo<span class="o">==</span><span class="m">1</span>.0.2
<span class="w">  </span>Downloading<span class="w"> </span>https://pypi.tuna.tsinghua.edu.cn/packages/7b/fe/beff7e7e4455cb9f69c5734897ca8552a57f6423b062ec86b2ebc1d79c0d/lanms_neo-1.0.2.tar.gz<span class="w"> </span><span class="o">(</span><span class="m">39</span><span class="w"> </span>kB<span class="o">)</span>
<span class="w">  </span>Installing<span class="w"> </span>build<span class="w"> </span>dependencies<span class="w"> </span>...<span class="w"> </span><span class="k">done</span>
<span class="w">  </span>Getting<span class="w"> </span>requirements<span class="w"> </span>to<span class="w"> </span>build<span class="w"> </span>wheel<span class="w"> </span>...<span class="w"> </span><span class="k">done</span>
<span class="w">  </span>Preparing<span class="w"> </span>metadata<span class="w"> </span><span class="o">(</span>pyproject.toml<span class="o">)</span><span class="w"> </span>...<span class="w"> </span><span class="k">done</span>
Building<span class="w"> </span>wheels<span class="w"> </span><span class="k">for</span><span class="w"> </span>collected<span class="w"> </span>packages:<span class="w"> </span>lanms-neo
<span class="w">  </span>Building<span class="w"> </span>wheel<span class="w"> </span><span class="k">for</span><span class="w"> </span>lanms-neo<span class="w"> </span><span class="o">(</span>pyproject.toml<span class="o">)</span><span class="w"> </span>...<span class="w"> </span>error
<span class="w">  </span>error:<span class="w"> </span>subprocess-exited-with-error

<span class="w">  </span>×<span class="w"> </span>Building<span class="w"> </span>wheel<span class="w"> </span><span class="k">for</span><span class="w"> </span>lanms-neo<span class="w"> </span><span class="o">(</span>pyproject.toml<span class="o">)</span><span class="w"> </span>did<span class="w"> </span>not<span class="w"> </span>run<span class="w"> </span>successfully.
<span class="w">  </span>│<span class="w"> </span><span class="nb">exit</span><span class="w"> </span>code:<span class="w"> </span><span class="m">1</span>
<span class="w">  </span>╰─&gt;<span class="w"> </span><span class="o">[</span><span class="m">10</span><span class="w"> </span>lines<span class="w"> </span>of<span class="w"> </span>output<span class="o">]</span>
<span class="w">      </span>running<span class="w"> </span>bdist_wheel
<span class="w">      </span>running<span class="w"> </span>build
<span class="w">      </span>running<span class="w"> </span>build_py
<span class="w">      </span>creating<span class="w"> </span>build
<span class="w">      </span>creating<span class="w"> </span>build<span class="se">\l</span>ib.win-amd64-cpython-37
<span class="w">      </span>creating<span class="w"> </span>build<span class="se">\l</span>ib.win-amd64-cpython-37<span class="se">\l</span>anms
<span class="w">      </span>copying<span class="w"> </span>lanms<span class="se">\_</span>_init__.py<span class="w"> </span>-&gt;<span class="w"> </span>build<span class="se">\l</span>ib.win-amd64-cpython-37<span class="se">\l</span>anms
<span class="w">      </span>running<span class="w"> </span>build_ext
<span class="w">      </span>building<span class="w"> </span><span class="s1">&#39;lanms._C&#39;</span><span class="w"> </span>extension
<span class="w">      </span>error:<span class="w"> </span>Microsoft<span class="w"> </span>Visual<span class="w"> </span>C++<span class="w"> </span><span class="m">14</span>.0<span class="w"> </span>or<span class="w"> </span>greater<span class="w"> </span>is<span class="w"> </span>required.<span class="w"> </span>Get<span class="w"> </span>it<span class="w"> </span>with<span class="w"> </span><span class="s2">&quot;Microsoft C++ Build Tools&quot;</span>:<span class="w"> </span>https://visualstudio.microsoft.com/visual-cpp-build-tools/
<span class="w">      </span><span class="o">[</span>end<span class="w"> </span>of<span class="w"> </span>output<span class="o">]</span>

<span class="w">  </span>note:<span class="w"> </span>This<span class="w"> </span>error<span class="w"> </span>originates<span class="w"> </span>from<span class="w"> </span>a<span class="w"> </span>subprocess,<span class="w"> </span>and<span class="w"> </span>is<span class="w"> </span>likely<span class="w"> </span>not<span class="w"> </span>a<span class="w"> </span>problem<span class="w"> </span>with<span class="w"> </span>pip.
<span class="w">  </span>ERROR:<span class="w"> </span>Failed<span class="w"> </span>building<span class="w"> </span>wheel<span class="w"> </span><span class="k">for</span><span class="w"> </span>lanms-neo
Failed<span class="w"> </span>to<span class="w"> </span>build<span class="w"> </span>lanms-neo
ERROR:<span class="w"> </span>Could<span class="w"> </span>not<span class="w"> </span>build<span class="w"> </span>wheels<span class="w"> </span><span class="k">for</span><span class="w"> </span>lanms-neo,<span class="w"> </span>which<span class="w"> </span>is<span class="w"> </span>required<span class="w"> </span>to<span class="w"> </span>install<span class="w"> </span>pyproject.toml-based<span class="w"> </span>projects
</code></pre></div>
<p>The <a href="https://visualstudio.microsoft.com/zh-hans/visual-cpp-build-tools/">Visual-cpp-build-tools</a> should be installed first, and you can successfully run <code>pip install lanms-neo</code>.</p>
<p>Remove the <code>lanms</code> item from <code>requirements.txt</code>, and run <code>pip install -r requirements.txt</code> to finish installation.</p>
<h3 id="q6-runtimeerror-the-device-address-type-is-wrong-type-name-in-addresscpu-type-name-in-contextascend">Q6 <code>RuntimeError: The device address type is wrong: type name in address:CPU, type name in context:Ascend</code><a class="headerlink" href="#q6-runtimeerror-the-device-address-type-is-wrong-type-name-in-addresscpu-type-name-in-contextascend" title="Permanent link">&para;</a></h3>
<ul>
<li><code>RuntimeError: The device address type is wrong: type name in address:CPU, type name in context:Ascend</code> may occur when exporting models:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">[</span>WARNING<span class="o">]</span><span class="w"> </span>ME<span class="o">(</span><span class="m">18680</span>:139900608063296,MainProcess<span class="o">)</span>:2023-10-31-12:31:20.141.25<span class="w"> </span><span class="o">[</span>mindspore/run_check/_check_version.py:348<span class="o">]</span><span class="w"> </span>Using<span class="w"> </span>custom<span class="w"> </span>Ascend<span class="w"> </span>AI<span class="w"> </span>software<span class="w"> </span>package<span class="w"> </span><span class="o">(</span>Ascend<span class="w"> </span>Data<span class="w"> </span>Center<span class="w"> </span>Solution<span class="o">)</span><span class="w"> </span>path,<span class="w"> </span>package<span class="w"> </span>version<span class="w"> </span>checking<span class="w"> </span>is<span class="w"> </span>skipped.<span class="w"> </span>Please<span class="w"> </span>make<span class="w"> </span>sure<span class="w"> </span>Ascend<span class="w"> </span>AI<span class="w"> </span>software<span class="w"> </span>package<span class="w"> </span><span class="o">(</span>Ascend<span class="w"> </span>Data<span class="w"> </span>Center<span class="w"> </span>Solution<span class="o">)</span><span class="w"> </span>version<span class="w"> </span>is<span class="w"> </span>supported.<span class="w"> </span>For<span class="w"> </span>details,<span class="w"> </span>refer<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>installation<span class="w"> </span>guidelines<span class="w"> </span>https://www.mindspore.cn/install
<span class="o">[</span>WARNING<span class="o">]</span><span class="w"> </span>ME<span class="o">(</span><span class="m">18680</span>:139900608063296,MainProcess<span class="o">)</span>:2023-10-31-12:31:20.143.96<span class="w"> </span><span class="o">[</span>mindspore/run_check/_check_version.py:460<span class="o">]</span><span class="w"> </span>Can<span class="w"> </span>not<span class="w"> </span>find<span class="w"> </span>the<span class="w"> </span>tbe<span class="w"> </span>operator<span class="w"> </span>implementation<span class="o">(</span>need<span class="w"> </span>by<span class="w"> </span>mindspore-ascend<span class="o">)</span>.<span class="w"> </span>Please<span class="w"> </span>check<span class="w"> </span>whether<span class="w"> </span>the<span class="w"> </span>Environment<span class="w"> </span>Variable<span class="w"> </span>PYTHONPATH<span class="w"> </span>is<span class="w"> </span>set.<span class="w"> </span>For<span class="w"> </span>details,<span class="w"> </span>refer<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>installation<span class="w"> </span>guidelines:<span class="w"> </span>https://www.mindspore.cn/install
<span class="o">[</span>WARNING<span class="o">]</span><span class="w"> </span>ME<span class="o">(</span><span class="m">18680</span>:139900608063296,MainProcess<span class="o">)</span>:2023-10-31-12:31:20.144.71<span class="w"> </span><span class="o">[</span>mindspore/run_check/_check_version.py:466<span class="o">]</span><span class="w"> </span>Can<span class="w"> </span>not<span class="w"> </span>find<span class="w"> </span>driver<span class="w"> </span>so<span class="o">(</span>need<span class="w"> </span>by<span class="w"> </span>mindspore-ascend<span class="o">)</span>.<span class="w"> </span>Please<span class="w"> </span>check<span class="w"> </span>whether<span class="w"> </span>the<span class="w"> </span>Environment<span class="w"> </span>Variable<span class="w"> </span>LD_LIBRARY_PATH<span class="w"> </span>is<span class="w"> </span>set.<span class="w"> </span>For<span class="w"> </span>details,<span class="w"> </span>refer<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>installation<span class="w"> </span>guidelines:<span class="w"> </span>https://www.mindspore.cn/install
Traceback<span class="w"> </span><span class="o">(</span>most<span class="w"> </span>recent<span class="w"> </span>call<span class="w"> </span>last<span class="o">)</span>:
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;tools/export.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">173</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>&lt;module&gt;
<span class="w">    </span>export<span class="o">(</span>**vars<span class="o">(</span>args<span class="o">))</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;tools/export.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">73</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nb">export</span>
<span class="w">    </span><span class="nv">net</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>build_model<span class="o">(</span>model_cfg,<span class="w"> </span><span class="nv">pretrained</span><span class="o">=</span>True,<span class="w"> </span><span class="nv">amp_level</span><span class="o">=</span>amp_level<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/xxx/mindocr/mindocr/models/builder.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">52</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>build_model
<span class="w">    </span><span class="nv">network</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>create_fn<span class="o">(</span>**kwargs<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/xxx/mindocr/mindocr/models/rec_svtr.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">122</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>svtr_tiny_ch
<span class="w">    </span><span class="nv">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>SVTR<span class="o">(</span>model_config<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/xxx/mindocr/mindocr/models/rec_svtr.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">26</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>__init__
<span class="w">    </span>BaseModel.__init__<span class="o">(</span>self,<span class="w"> </span>config<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/xxx/mindocr/mindocr/models/base_model.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">34</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>__init__
<span class="w">    </span>self.backbone<span class="w"> </span><span class="o">=</span><span class="w"> </span>build_backbone<span class="o">(</span>backbone_name,<span class="w"> </span>**config.backbone<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/xxx/mindocr/mindocr/models/backbones/builder.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">48</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>build_backbone
<span class="w">    </span><span class="nv">backbone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>backbone_class<span class="o">(</span>**kwargs<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/xxx/mindocr/mindocr/models/backbones/rec_svtr.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">486</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>__init__
<span class="w">    </span>ops.zeros<span class="o">((</span><span class="m">1</span>,<span class="w"> </span>num_patches,<span class="w"> </span>embed_dim<span class="o">[</span><span class="m">0</span><span class="o">])</span>,<span class="w"> </span>ms.float32<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/xxx/py37/lib/python3.7/site-packages/mindspore/ops/function/array_func.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">1039</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>zeros
<span class="w">    </span><span class="nv">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>zero_op<span class="o">(</span>size,<span class="w"> </span>value<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/xxx/py37/lib/python3.7/site-packages/mindspore/ops/primitive.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">314</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>__call__
<span class="w">    </span><span class="k">return</span><span class="w"> </span>_run_op<span class="o">(</span>self,<span class="w"> </span>self.name,<span class="w"> </span>args<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/xxx/py37/lib/python3.7/site-packages/mindspore/ops/primitive.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">913</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>_run_op
<span class="w">    </span><span class="nv">stub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>_pynative_executor.run_op_async<span class="o">(</span>obj,<span class="w"> </span>op_name,<span class="w"> </span>args<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/xxx/py37/lib/python3.7/site-packages/mindspore/common/api.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">1186</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>run_op_async
<span class="w">    </span><span class="k">return</span><span class="w"> </span>self._executor.run_op_async<span class="o">(</span>*args<span class="o">)</span>
RuntimeError:<span class="w"> </span>The<span class="w"> </span>device<span class="w"> </span>address<span class="w"> </span><span class="nb">type</span><span class="w"> </span>is<span class="w"> </span>wrong:<span class="w"> </span><span class="nb">type</span><span class="w"> </span>name<span class="w"> </span><span class="k">in</span><span class="w"> </span>address:CPU,<span class="w"> </span><span class="nb">type</span><span class="w"> </span>name<span class="w"> </span><span class="k">in</span><span class="w"> </span>context:Ascend

----------------------------------------------------
-<span class="w"> </span>C++<span class="w"> </span>Call<span class="w"> </span>Stack:<span class="w"> </span><span class="o">(</span>For<span class="w"> </span>framework<span class="w"> </span>developers<span class="o">)</span>
----------------------------------------------------
mindspore/ccsrc/plugin/device/ascend/hal/hardware/ge_device_res_manager.cc:72<span class="w"> </span>AllocateMemory
</code></pre></div>
<ul>
<li>An error occurred in the calculation in Ascend mode, which raise <code>RuntimeError: The device address type is wrong: type name in address:CPU, type name in context:Ascend</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">Python</span> <span class="mf">3.7.16</span> <span class="p">(</span><span class="n">default</span><span class="p">,</span> <span class="n">Jan</span> <span class="mi">17</span> <span class="mi">2023</span><span class="p">,</span> <span class="mi">22</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mi">44</span><span class="p">)</span>
<span class="p">[</span><span class="n">GCC</span> <span class="mf">11.2.0</span><span class="p">]</span> <span class="p">::</span> <span class="n">Anaconda</span><span class="p">,</span> <span class="n">Inc</span><span class="o">.</span> <span class="n">on</span> <span class="n">linux</span>
<span class="n">Type</span> <span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="s2">&quot;copyright&quot;</span><span class="p">,</span> <span class="s2">&quot;credits&quot;</span> <span class="ow">or</span> <span class="s2">&quot;license&quot;</span> <span class="k">for</span> <span class="n">more</span> <span class="n">information</span><span class="o">.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">mindspore</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ms</span>
<span class="p">[</span><span class="n">WARNING</span><span class="p">]</span> <span class="n">ME</span><span class="p">(</span><span class="mi">44720</span><span class="p">:</span><span class="mi">140507814819648</span><span class="p">,</span><span class="n">MainProcess</span><span class="p">):</span><span class="mi">2023</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">03</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">38.884.384</span> <span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">run_check</span><span class="o">/</span><span class="n">_check_version</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">348</span><span class="p">]</span> <span class="n">Using</span> <span class="n">custom</span> <span class="n">Ascend</span> <span class="n">AI</span> <span class="n">software</span> <span class="n">package</span> <span class="p">(</span><span class="n">Ascend</span> <span class="n">Data</span> <span class="n">Center</span> <span class="n">Solution</span><span class="p">)</span> <span class="n">path</span><span class="p">,</span> <span class="n">package</span> <span class="n">version</span> <span class="n">checking</span> <span class="ow">is</span> <span class="n">skipped</span><span class="o">.</span> <span class="n">Please</span> <span class="n">make</span> <span class="n">sure</span> <span class="n">Ascend</span> <span class="n">AI</span> <span class="n">software</span> <span class="n">package</span> <span class="p">(</span><span class="n">Ascend</span> <span class="n">Data</span> <span class="n">Center</span> <span class="n">Solution</span><span class="p">)</span> <span class="n">version</span> <span class="ow">is</span> <span class="n">supported</span><span class="o">.</span> <span class="n">For</span> <span class="n">details</span><span class="p">,</span> <span class="n">refer</span> <span class="n">to</span> <span class="n">the</span> <span class="n">installation</span> <span class="n">guidelines</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">mindspore</span><span class="o">.</span><span class="n">cn</span><span class="o">/</span><span class="n">install</span>
<span class="p">[</span><span class="n">WARNING</span><span class="p">]</span> <span class="n">ME</span><span class="p">(</span><span class="mi">44720</span><span class="p">:</span><span class="mi">140507814819648</span><span class="p">,</span><span class="n">MainProcess</span><span class="p">):</span><span class="mi">2023</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">03</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">38.884.675</span> <span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">run_check</span><span class="o">/</span><span class="n">_check_version</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">466</span><span class="p">]</span> <span class="n">Can</span> <span class="ow">not</span> <span class="n">find</span> <span class="n">driver</span> <span class="n">so</span><span class="p">(</span><span class="n">need</span> <span class="n">by</span> <span class="n">mindspore</span><span class="o">-</span><span class="n">ascend</span><span class="p">)</span><span class="o">.</span> <span class="n">Please</span> <span class="n">check</span> <span class="n">whether</span> <span class="n">the</span> <span class="n">Environment</span> <span class="n">Variable</span> <span class="n">LD_LIBRARY_PATH</span> <span class="ow">is</span> <span class="nb">set</span><span class="o">.</span> <span class="n">For</span> <span class="n">details</span><span class="p">,</span> <span class="n">refer</span> <span class="n">to</span> <span class="n">the</span> <span class="n">installation</span> <span class="n">guidelines</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">mindspore</span><span class="o">.</span><span class="n">cn</span><span class="o">/</span><span class="n">install</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">mindspore.ops</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ops</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ms</span><span class="o">.</span><span class="n">set_device</span><span class="p">(</span><span class="s2">&quot;Ascend&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ms</span><span class="o">.</span><span class="n">run_check</span><span class="p">()</span>
<span class="n">MindSpore</span> <span class="n">version</span><span class="p">:</span>  <span class="mf">2.2.0.20231025</span>
<span class="n">The</span> <span class="n">result</span> <span class="n">of</span> <span class="n">multiplication</span> <span class="n">calculation</span> <span class="ow">is</span> <span class="n">correct</span><span class="p">,</span> <span class="n">MindSpore</span> <span class="n">has</span> <span class="n">been</span> <span class="n">installed</span> <span class="n">on</span> <span class="n">platform</span> <span class="p">[</span><span class="n">Ascend</span><span class="p">]</span> <span class="n">successfully</span><span class="err">!</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
  <span class="n">File</span> <span class="s2">&quot;/root/miniconda3/envs/py37/lib/python3.7/site-packages/mindspore/common/_stub_tensor.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">49</span><span class="p">,</span> <span class="ow">in</span> <span class="n">fun</span>
    <span class="k">return</span> <span class="n">method</span><span class="p">(</span><span class="o">*</span><span class="n">arg</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
  <span class="n">File</span> <span class="s2">&quot;/root/miniconda3/envs/py37/lib/python3.7/site-packages/mindspore/common/tensor.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">493</span><span class="p">,</span> <span class="ow">in</span> <span class="fm">__str__</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">())</span>
  <span class="n">File</span> <span class="s2">&quot;/root/miniconda3/envs/py37/lib/python3.7/site-packages/mindspore/common/tensor.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">964</span><span class="p">,</span> <span class="ow">in</span> <span class="n">asnumpy</span>
    <span class="k">return</span> <span class="n">Tensor_</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<span class="ne">RuntimeError</span><span class="p">:</span> <span class="n">The</span> <span class="n">device</span> <span class="n">address</span> <span class="nb">type</span> <span class="ow">is</span> <span class="n">wrong</span><span class="p">:</span> <span class="nb">type</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">address</span><span class="p">:</span><span class="n">CPU</span><span class="p">,</span> <span class="nb">type</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">context</span><span class="p">:</span><span class="n">Ascend</span>

<span class="o">----------------------------------------------------</span>
<span class="o">-</span> <span class="n">C</span><span class="o">++</span> <span class="n">Call</span> <span class="n">Stack</span><span class="p">:</span> <span class="p">(</span><span class="n">For</span> <span class="n">framework</span> <span class="n">developers</span><span class="p">)</span>
<span class="o">----------------------------------------------------</span>
<span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">plugin</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">hal</span><span class="o">/</span><span class="n">hardware</span><span class="o">/</span><span class="n">ge_device_res_manager</span><span class="o">.</span><span class="n">cc</span><span class="p">:</span><span class="mi">72</span> <span class="n">AllocateMemory</span>
</code></pre></div>
<p>Ascend 310 or Ascend 310P3 may not support calculation in MindSpore Ascend mode. Please refer  <a href="https://www.mindspore.cn/install/en">MindSpore download</a> and check the consistence of MindSpore version and platform. You can also</p>
<ul>
<li>Change Ascend mode to CPU</li>
<li>Use <a href="https://www.mindspore.cn/lite/en">MindSpore Lite</a> instead</li>
</ul>
<h3 id="q7-problems-related-to-model-converting">Q7 Problems related to model converting<a class="headerlink" href="#q7-problems-related-to-model-converting" title="Permanent link">&para;</a></h3>
<ul>
<li><code>SetGraphInputShape] Failed to find input xxx in input_shape yyy:xxxxxxxxxxx</code> occurs when converting model to Device-side <code>mindir</code> by <code>converter_lite</code>. If you convert <a href="https://gitee.com/link?target=https%3A%2F%2Fdownload.mindspore.cn%2Ftoolkits%2Fmindocr%2Fdbnet%2Fdbnet_resnet50-c3a4aa24-fbf95c82.mindir">dbnet_resnet50.mindir</a> to Device-side <code>mindir</code> with the <code>config.txt</code> as following:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">[</span>ascend_context<span class="o">]</span>
<span class="nv">input_format</span><span class="o">=</span>NCHW
<span class="nv">input_shape</span><span class="o">=</span>args0:<span class="o">[</span><span class="m">1</span>,3,736,1280<span class="o">]</span>
</code></pre></div>
<p>and run the following command to convert model:</p>
<div class="highlight"><pre><span></span><code>converter_lite<span class="w"> </span>--saveType<span class="o">=</span>MINDIR<span class="w"> </span>--fmk<span class="o">=</span>MINDIR<span class="w"> </span>--optimize<span class="o">=</span>ascend_oriented<span class="w"> </span>--modelFile<span class="o">=</span>dbnet_resnet50.mindir<span class="w"> </span>--outputFile<span class="o">=</span>dbnet_resnet50_lite<span class="w"> </span>--configFile<span class="o">=</span>config.txt
</code></pre></div>
<p>Error may occur:</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">30860</span>,7f579d3f4f40,converter_lite<span class="o">)</span>:2023-11-10-03:19:29.005.385<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/adapter/acl/src/acl_pass_impl.cc:756<span class="o">]</span><span class="w"> </span>SetGraphInputShape<span class="o">]</span><span class="w"> </span>Failed<span class="w"> </span>to<span class="w"> </span>find<span class="w"> </span>input<span class="w"> </span>x<span class="w"> </span><span class="k">in</span><span class="w"> </span>input_shape<span class="w"> </span>args0:1,3,736,1280
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">30860</span>,7f579d3f4f40,converter_lite<span class="o">)</span>:2023-11-10-03:19:29.005.416<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/adapter/acl/src/acl_pass_impl.cc:773<span class="o">]</span><span class="w"> </span>ConvertGraphToOm<span class="o">]</span><span class="w"> </span>Failed<span class="w"> </span>to<span class="w"> </span><span class="nb">set</span><span class="w"> </span>graph<span class="w"> </span>input<span class="w"> </span>shape
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">30860</span>,7f579d3f4f40,converter_lite<span class="o">)</span>:2023-11-10-03:19:29.005.427<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/adapter/acl/src/acl_pass_impl.cc:862<span class="o">]</span><span class="w"> </span>BuildGraph<span class="o">]</span><span class="w"> </span>Convert<span class="w"> </span>graph<span class="w">  </span>to<span class="w"> </span>om<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">30860</span>,7f579d3f4f40,converter_lite<span class="o">)</span>:2023-11-10-03:19:29.005.439<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/adapter/acl/src/acl_pass_impl.cc:1320<span class="o">]</span><span class="w"> </span>Run<span class="o">]</span><span class="w"> </span>Build<span class="w"> </span>graph<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">30860</span>,7f579d3f4f40,converter_lite<span class="o">)</span>:2023-11-10-03:19:29.005.450<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/adapter/acl/acl_pass.cc:42<span class="o">]</span><span class="w"> </span>Run<span class="o">]</span><span class="w"> </span>Acl<span class="w"> </span>pass<span class="w"> </span>impl<span class="w"> </span>run<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">30860</span>,7f579d3f4f40,converter_lite<span class="o">)</span>:2023-11-10-03:19:29.005.461<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/anf_transform.cc:472<span class="o">]</span><span class="w"> </span>RunConvertPass<span class="o">]</span><span class="w"> </span>Acl<span class="w"> </span>pass<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">30860</span>,7f579d3f4f40,converter_lite<span class="o">)</span>:2023-11-10-03:19:29.005.476<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/anf_transform.cc:660<span class="o">]</span><span class="w"> </span>RunPass<span class="o">]</span><span class="w"> </span>Run<span class="w"> </span>convert<span class="w"> </span>pass<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">30860</span>,7f579d3f4f40,converter_lite<span class="o">)</span>:2023-11-10-03:19:29.005.486<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/anf_transform.cc:754<span class="o">]</span><span class="w"> </span>TransformFuncGraph<span class="o">]</span><span class="w"> </span>Proc<span class="w"> </span>online<span class="w"> </span>transform<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">30860</span>,7f579d3f4f40,converter_lite<span class="o">)</span>:2023-11-10-03:19:29.005.555<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/anf_transform.cc:855<span class="o">]</span><span class="w"> </span>Transform<span class="o">]</span><span class="w"> </span>optimizer<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">30860</span>,7f579d3f4f40,converter_lite<span class="o">)</span>:2023-11-10-03:19:29.005.564<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/converter_funcgraph.cc:471<span class="o">]</span><span class="w"> </span>Optimize<span class="o">]</span><span class="w"> </span>Transform<span class="w"> </span>anf<span class="w"> </span>graph<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">30860</span>,7f579d3f4f40,converter_lite<span class="o">)</span>:2023-11-10-03:19:29.006.118<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/converter.cc:1029<span class="o">]</span><span class="w"> </span>HandleGraphCommon<span class="o">]</span><span class="w"> </span>Optimize<span class="w"> </span>func<span class="w"> </span>graph<span class="w"> </span>failed:<span class="w"> </span>-2<span class="w"> </span>NULL<span class="w"> </span>pointer<span class="w"> </span>returned.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">30860</span>,7f579d3f4f40,converter_lite<span class="o">)</span>:2023-11-10-03:19:29.013.133<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/converter.cc:979<span class="o">]</span><span class="w"> </span>Convert<span class="o">]</span><span class="w"> </span>Handle<span class="w"> </span>graph<span class="w"> </span>failed:<span class="w"> </span>-2<span class="w"> </span>NULL<span class="w"> </span>pointer<span class="w"> </span>returned.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">30860</span>,7f579d3f4f40,converter_lite<span class="o">)</span>:2023-11-10-03:19:29.013.150<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/converter.cc:1166<span class="o">]</span><span class="w"> </span>RunConverter<span class="o">]</span><span class="w"> </span>Convert<span class="w"> </span>model<span class="w"> </span>failed
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">30860</span>,7f579d3f4f40,converter_lite<span class="o">)</span>:2023-11-10-03:19:29.013.163<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/cxx_api/converter.cc:348<span class="o">]</span><span class="w"> </span>Convert<span class="o">]</span><span class="w"> </span>Convert<span class="w"> </span>model<span class="w"> </span>failed,<span class="w"> </span><span class="nv">ret</span><span class="o">=</span>NULL<span class="w"> </span>pointer<span class="w"> </span>returned.
ERROR<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/converter_lite/main.cc:104<span class="o">]</span><span class="w"> </span>main<span class="o">]</span><span class="w"> </span>Convert<span class="w"> </span>failed.<span class="w"> </span>Ret:<span class="w"> </span>NULL<span class="w"> </span>pointer<span class="w"> </span>returned.
Convert<span class="w"> </span>failed.<span class="w"> </span>Ret:<span class="w"> </span>NULL<span class="w"> </span>pointer<span class="w"> </span>returned.
</code></pre></div>
<p>The problem is caused by the mismatch of variable names. The error message</p>
<div class="highlight"><pre><span></span><code>Failed<span class="w"> </span>to<span class="w"> </span>find<span class="w"> </span>input<span class="w"> </span>x<span class="w"> </span><span class="k">in</span><span class="w"> </span>input_shape<span class="w"> </span>args0:1,3,736,1280
</code></pre></div>
<p>shows that variable <code>x</code> does not match with variable <code>args0</code>. Try to replace <code>args0</code> with <code>x</code> in the <code>config.txt</code>.</p>
<ul>
<li><code>Can't find OpAdapter for LSTM</code> occurs when converting model to <code>MindSpore Lite Mindir</code> by <code>converter_lite</code>.</li>
</ul>
<p>After exporting a MindIR file by <code>export.py</code> on lite inference devices, convert the MindIR file to <code>MindSpore Lite Mindir</code> by <code>converter_lite</code> as the following command:</p>
<div class="highlight"><pre><span></span><code>converter_lite<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--saveType<span class="o">=</span>MINDIR<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--fmk<span class="o">=</span>MINDIR<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--optimize<span class="o">=</span>ascend_oriented<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--modelFile<span class="o">=</span>./models/rec/CRNN/VGG7/crnn_vgg7.mindir<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--outputFile<span class="o">=</span>./models/rec/CRNN/VGG7/crnn_vgg7_lite<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--configFile<span class="o">=</span>./config.txt
</code></pre></div>
<p>Error may occur:</p>
<div class="highlight"><pre><span></span><code>[WARNING] GE_ADPT(837950,7feb6e13bf40,converter_lite):2024-10-26-07:37:40.545.361 [mindspore/ccsrc/transform/graph_ir/utils.cc:59] FindAdapter] Can&#39;t find OpAdapter for LSTM
[ERROR] GE_ADPT(837950,7feb6e13bf40,converter_lite):2024-10-26-07:37:40.545.393 [mindspore/ccsrc/transform/graph_ir/convert.cc:4040] ConvertCNode] Cannot get adapter for Default/neck-RNNEncoder/seq_encoder-LSTM/rnn-_DynamicLSTMCPUGPU/LSTM-op90
[ERROR] GE_ADPT(837950,7feb6e13bf40,converter_lite):2024-10-26-07:37:40.545.437 [mindspore/ccsrc/transform/graph_ir/convert.cc:1034] ConvertAllNode] Failed to convert node: @391_390_1_mindocr_models_base_model_BaseModel_construct_24_1:nout{[0]: ValueNode&lt;Primitive&gt; LSTM, [1]: nout, [2]: nout, [3]: nout, [4]: nout}.
[ERROR] GE_ADPT(837950,7feb6e13bf40,converter_lite):2024-10-26-07:37:40.545.457 [mindspore/ccsrc/transform/graph_ir/convert.cc:1034] ConvertAllNode] Failed to convert node: ValueNode&lt;Primitive&gt; TupleGetItem.
[ERROR] GE_ADPT(837950,7feb6e13bf40,converter_lite):2024-10-26-07:37:40.545.561 [mindspore/ccsrc/transform/graph_ir/convert.cc:1034] ConvertAllNode] Failed to convert node: @391_390_1_mindocr_models_base_model_BaseModel_construct_24_1:nout{[0]: ValueNode&lt;Primitive&gt; TupleGetItem, [1]: nout, [2]: ValueNode&lt;Int64Imm&gt; 0}.
[ERROR] GE_ADPT(837950,7feb6e13bf40,converter_lite):2024-10-26-07:37:40.545.582 [mindspore/ccsrc/transform/graph_ir/convert.cc:1034] ConvertAllNode] Failed to convert node: ValueNode&lt;Primitive&gt; ReverseV2.
[ERROR] GE_ADPT(837950,7feb6e13bf40,converter_lite):2024-10-26-07:37:40.545.667 [mindspore/ccsrc/transform/graph_ir/convert.cc:1034] ConvertAllNode] Failed to convert node: @391_390_1_mindocr_models_base_model_BaseModel_construct_24_1:nout{[0]: ValueNode&lt;Primitive&gt; ReverseV2, [1]: nout}.
[ERROR] GE_ADPT(837950,7feb6e13bf40,converter_lite):2024-10-26-07:37:40.545.734 [mindspore/ccsrc/transform/graph_ir/convert.cc:1034] ConvertAllNode] Failed to convert node: @391_390_1_mindocr_models_base_model_BaseModel_construct_24_1:param_neck.seq_encoder.bias_hh_l0.
</code></pre></div>
<p>In this case, please try to export the MindIR file by <code>export.py</code> on Ascend training devices, and then convert the MindIR file to <code>MindSpore Lite Mindir</code> by <code>converter_lite</code> on lite inference devices.</p>
<ul>
<li><code>RuntimeError: Load op info form json config failed, version: Ascend310</code> occurs when export a MindIR file by <code>export.py</code>.</li>
</ul>
<p>Export a MindIR file by <code>export.py</code> on lite inference devices as the following command:</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>tools/export.py<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--model_name_or_config<span class="w"> </span>configs/det/fcenet/fce_icdar15.yaml<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--data_shape<span class="w"> </span><span class="m">736</span><span class="w"> </span><span class="m">1280</span><span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--local_ckpt_path<span class="w"> </span>./fcenet_resnet50-43857f7f.ckpt
</code></pre></div>
<p>Error may occur:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>KERNEL<span class="o">(</span><span class="m">849474</span>,7f7571d68740,python<span class="o">)</span>:2024-10-26-08:44:27.998.221<span class="w"> </span><span class="o">[</span>mindspore/ccsrc/kernel/oplib/op_info_utils.cc:179<span class="o">]</span><span class="w"> </span>LoadOpInfoJson<span class="o">]</span><span class="w"> </span>Get<span class="w"> </span>op<span class="w"> </span>info<span class="w"> </span>json<span class="w"> </span>suffix<span class="w"> </span>path<span class="w"> </span>failed,<span class="w"> </span>soc_version:<span class="w"> </span>Ascend310
<span class="w">  </span><span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>KERNEL<span class="o">(</span><span class="m">849474</span>,7f7571d68740,python<span class="o">)</span>:2024-10-26-08:44:27.998.362<span class="w"> </span><span class="o">[</span>mindspore/ccsrc/kernel/oplib/op_info_utils.cc:118<span class="o">]</span><span class="w"> </span>GenerateOpInfos<span class="o">]</span><span class="w"> </span>Load<span class="w"> </span>op<span class="w"> </span>info<span class="w"> </span>json<span class="w"> </span>failed,<span class="w"> </span>version:<span class="w"> </span>Ascend310
<span class="w">  </span><span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>ANALYZER<span class="o">(</span><span class="m">849474</span>,7f7571d68740,python<span class="o">)</span>:2024-10-26-08:44:30.168.028<span class="w"> </span><span class="o">[</span>mindspore/ccsrc/pipeline/jit/ps/static_analysis/async_eval_result.cc:70<span class="o">]</span><span class="w"> </span>HandleException<span class="o">]</span><span class="w"> </span>Exception<span class="w"> </span>happened,<span class="w"> </span>check<span class="w"> </span>the<span class="w"> </span>information<span class="w"> </span>as<span class="w"> </span>below.
<span class="w">  </span>RuntimeError:<span class="w"> </span>Load<span class="w"> </span>op<span class="w"> </span>info<span class="w"> </span>form<span class="w"> </span>json<span class="w"> </span>config<span class="w"> </span>failed,<span class="w"> </span>version:<span class="w"> </span>Ascend310

<span class="w">  </span>----------------------------------------------------
<span class="w">  </span>-<span class="w"> </span>C++<span class="w"> </span>Call<span class="w"> </span>Stack:<span class="w"> </span><span class="o">(</span>For<span class="w"> </span>framework<span class="w"> </span>developers<span class="o">)</span>
<span class="w">  </span>----------------------------------------------------
<span class="w">  </span>mindspore/ccsrc/plugin/device/ascend/hal/device/ascend_kernel_runtime.cc:320<span class="w"> </span>Init
</code></pre></div>
<p>In this case, please try to export the MindIR file by <code>export.py</code> on Ascend training devices.</p>
<ul>
<li><code>Save ge model to buffer failed.</code> when using Cloud-Side <code>mindir</code> model to do inference.
  For example, if you use Cloud-Side <code>mindir</code> model to do inference in detection stage, it may raise:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>ME<span class="o">(</span><span class="m">43138</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:45.206.120<span class="w"> </span><span class="o">[</span>mindspore/ccsrc/cxx_api/model/acl/model_converter.cc:200<span class="o">]</span><span class="w"> </span>operator<span class="o">()]</span><span class="w"> </span>Save<span class="w"> </span>ge<span class="w"> </span>model<span class="w"> </span>to<span class="w"> </span>buffer<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>ME<span class="o">(</span><span class="m">43138</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:45.206.157<span class="w"> </span><span class="o">[</span>mindspore/ccsrc/cxx_api/model/model_converter_utils/multi_process.cc:118<span class="o">]</span><span class="w"> </span>ParentProcess<span class="o">]</span><span class="w"> </span>Parent<span class="w"> </span>process<span class="w"> </span>process<span class="w"> </span>failed
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>ME<span class="o">(</span><span class="m">43123</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:45.277.253<span class="w"> </span><span class="o">[</span>mindspore/ccsrc/cxx_api/model/acl/model_converter.cc:200<span class="o">]</span><span class="w"> </span>operator<span class="o">()]</span><span class="w"> </span>Save<span class="w"> </span>ge<span class="w"> </span>model<span class="w"> </span>to<span class="w"> </span>buffer<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>ME<span class="o">(</span><span class="m">43123</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:45.277.292<span class="w"> </span><span class="o">[</span>mindspore/ccsrc/cxx_api/model/model_converter_utils/multi_process.cc:118<span class="o">]</span><span class="w"> </span>ParentProcess<span class="o">]</span><span class="w"> </span>Parent<span class="w"> </span>process<span class="w"> </span>process<span class="w"> </span>failed
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>ME<span class="o">(</span><span class="m">43138</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.235.224<span class="w"> </span><span class="o">[</span>mindspore/ccsrc/cxx_api/model/acl/model_converter.cc:251<span class="o">]</span><span class="w"> </span>LoadMindIR<span class="o">]</span><span class="w"> </span>Convert<span class="w"> </span>MindIR<span class="w"> </span>model<span class="w"> </span>to<span class="w"> </span>OM<span class="w"> </span>model<span class="w"> </span>failed
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">43138</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.235.280<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/adapter/acl/src/acl_pass_impl.cc:781<span class="o">]</span><span class="w"> </span>ConvertGraphToOm<span class="o">]</span><span class="w"> </span>Model<span class="w"> </span>converter<span class="w"> </span>load<span class="w"> </span>mindir<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">43138</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.235.307<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/adapter/acl/src/acl_pass_impl.cc:862<span class="o">]</span><span class="w"> </span>BuildGraph<span class="o">]</span><span class="w"> </span>Convert<span class="w"> </span>graph<span class="w">  </span>to<span class="w"> </span>om<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">43138</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.235.332<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/adapter/acl/src/acl_pass_impl.cc:1320<span class="o">]</span><span class="w"> </span>Run<span class="o">]</span><span class="w"> </span>Build<span class="w"> </span>graph<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">43138</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.235.359<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/adapter/acl/acl_pass.cc:42<span class="o">]</span><span class="w"> </span>Run<span class="o">]</span><span class="w"> </span>Acl<span class="w"> </span>pass<span class="w"> </span>impl<span class="w"> </span>run<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">43138</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.235.388<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/anf_transform.cc:472<span class="o">]</span><span class="w"> </span>RunConvertPass<span class="o">]</span><span class="w"> </span>Acl<span class="w"> </span>pass<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">43138</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.235.430<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/anf_transform.cc:660<span class="o">]</span><span class="w"> </span>RunPass<span class="o">]</span><span class="w"> </span>Run<span class="w"> </span>convert<span class="w"> </span>pass<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">43138</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.235.453<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/anf_transform.cc:754<span class="o">]</span><span class="w"> </span>TransformFuncGraph<span class="o">]</span><span class="w"> </span>Proc<span class="w"> </span>online<span class="w"> </span>transform<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">43138</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.235.673<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/anf_transform.cc:855<span class="o">]</span><span class="w"> </span>Transform<span class="o">]</span><span class="w"> </span>optimizer<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">43138</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.235.698<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/converter_funcgraph.cc:471<span class="o">]</span><span class="w"> </span>Optimize<span class="o">]</span><span class="w"> </span>Transform<span class="w"> </span>anf<span class="w"> </span>graph<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>ME<span class="o">(</span><span class="m">43138</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.238.216<span class="w"> </span><span class="o">[</span>mindspore/lite/src/extendrt/convert/runtime_convert.cc:214<span class="o">]</span><span class="w"> </span>RuntimeConvert<span class="o">]</span><span class="w"> </span>Convert<span class="w"> </span>model<span class="w"> </span>failed
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>ME<span class="o">(</span><span class="m">43138</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.238.270<span class="w"> </span><span class="o">[</span>mindspore/lite/src/extendrt/cxx_api/model/model_impl.cc:507<span class="o">]</span><span class="w"> </span>ConvertGraphOnline<span class="o">]</span><span class="w"> </span>Failed<span class="w"> </span>to<span class="w"> </span>converter<span class="w"> </span>graph
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>ME<span class="o">(</span><span class="m">43138</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.238.351<span class="w"> </span><span class="o">[</span>mindspore/lite/src/extendrt/cxx_api/model/model_impl.cc:395<span class="o">]</span><span class="w"> </span>BuildByBufferImpl<span class="o">]</span><span class="w"> </span>convert<span class="w"> </span>graph<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>MINDOCR<span class="o">(</span><span class="m">43138</span>:139649752078144,Process-1:18<span class="o">)</span>:2023-11-10-03:40:46.255.926<span class="w"> </span><span class="o">[</span>src/parallel/framework/module_base.py:38<span class="o">]</span><span class="w"> </span>DetInferNode<span class="w"> </span>init<span class="w"> </span>failed:<span class="w"> </span>build_from_file<span class="w"> </span>failed!<span class="w"> </span>Error<span class="w"> </span>is<span class="w"> </span>Common<span class="w"> </span>error<span class="w"> </span>code.
Process<span class="w"> </span>Process-1:18:
Traceback<span class="w"> </span><span class="o">(</span>most<span class="w"> </span>recent<span class="w"> </span>call<span class="w"> </span>last<span class="o">)</span>:
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/root/miniconda3/envs/py37/lib/python3.7/multiprocessing/process.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">297</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>_bootstrap
<span class="w">    </span>self.run<span class="o">()</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/root/miniconda3/envs/py37/lib/python3.7/multiprocessing/process.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">99</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>run
<span class="w">    </span>self._target<span class="o">(</span>*self._args,<span class="w"> </span>**self._kwargs<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/deploy/py_infer/src/parallel/framework/module_base.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">39</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>process_handler
<span class="w">    </span>raise<span class="w"> </span>error
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/deploy/py_infer/src/parallel/framework/module_base.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">34</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>process_handler
<span class="w">    </span><span class="nv">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>self.init_self_args<span class="o">()</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/deploy/py_infer/src/parallel/module/detection/det_infer_node.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">12</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>init_self_args
<span class="w">    </span>self.text_detector.init<span class="o">(</span><span class="nv">preprocess</span><span class="o">=</span>False,<span class="w"> </span><span class="nv">model</span><span class="o">=</span>True,<span class="w"> </span><span class="nv">postprocess</span><span class="o">=</span>False<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/deploy/py_infer/src/infer/infer_base.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">29</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>init
<span class="w">    </span>self._init_model<span class="o">()</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/deploy/py_infer/src/infer/infer_det.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">22</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>_init_model
<span class="w">    </span><span class="nv">device_id</span><span class="o">=</span>self.args.device_id,
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/deploy/py_infer/src/core/model/model.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">15</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>__init__
<span class="w">    </span>self.model<span class="w"> </span><span class="o">=</span><span class="w"> </span>_INFER_BACKEND_MAP<span class="o">[</span>backend<span class="o">](</span>**kwargs<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/deploy/py_infer/src/core/model/backend/lite_model.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">16</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>__init__
<span class="w">    </span>super<span class="o">()</span>.__init__<span class="o">(</span>model_path,<span class="w"> </span>device,<span class="w"> </span>device_id<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/deploy/py_infer/src/core/model/backend/model_base.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">28</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>__init__
<span class="w">    </span>self._init_model<span class="o">()</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/deploy/py_infer/src/core/model/backend/lite_model.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">33</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>_init_model
<span class="w">    </span>self.model.build_from_file<span class="o">(</span>self.model_path,<span class="w"> </span>mslite.ModelType.MINDIR,<span class="w"> </span>context<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/root/miniconda3/envs/py37/lib/python3.7/site-packages/mindspore_lite/model.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">95</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>warpper
<span class="w">    </span><span class="k">return</span><span class="w"> </span>func<span class="o">(</span>*args,<span class="w"> </span>**kwargs<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/root/miniconda3/envs/py37/lib/python3.7/site-packages/mindspore_lite/model.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">235</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>build_from_file
<span class="w">    </span>raise<span class="w"> </span>RuntimeError<span class="o">(</span>f<span class="s2">&quot;build_from_file failed! Error is {ret.ToString()}&quot;</span><span class="o">)</span>
RuntimeError:<span class="w"> </span>build_from_file<span class="w"> </span>failed!<span class="w"> </span>Error<span class="w"> </span>is<span class="w"> </span>Common<span class="w"> </span>error<span class="w"> </span>code.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>ME<span class="o">(</span><span class="m">43123</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.305.698<span class="w"> </span><span class="o">[</span>mindspore/ccsrc/cxx_api/model/acl/model_converter.cc:251<span class="o">]</span><span class="w"> </span>LoadMindIR<span class="o">]</span><span class="w"> </span>Convert<span class="w"> </span>MindIR<span class="w"> </span>model<span class="w"> </span>to<span class="w"> </span>OM<span class="w"> </span>model<span class="w"> </span>failed
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">43123</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.305.755<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/adapter/acl/src/acl_pass_impl.cc:781<span class="o">]</span><span class="w"> </span>ConvertGraphToOm<span class="o">]</span><span class="w"> </span>Model<span class="w"> </span>converter<span class="w"> </span>load<span class="w"> </span>mindir<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">43123</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.305.782<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/adapter/acl/src/acl_pass_impl.cc:862<span class="o">]</span><span class="w"> </span>BuildGraph<span class="o">]</span><span class="w"> </span>Convert<span class="w"> </span>graph<span class="w">  </span>to<span class="w"> </span>om<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">43123</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.305.807<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/adapter/acl/src/acl_pass_impl.cc:1320<span class="o">]</span><span class="w"> </span>Run<span class="o">]</span><span class="w"> </span>Build<span class="w"> </span>graph<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">43123</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.305.834<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/adapter/acl/acl_pass.cc:42<span class="o">]</span><span class="w"> </span>Run<span class="o">]</span><span class="w"> </span>Acl<span class="w"> </span>pass<span class="w"> </span>impl<span class="w"> </span>run<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">43123</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.305.864<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/anf_transform.cc:472<span class="o">]</span><span class="w"> </span>RunConvertPass<span class="o">]</span><span class="w"> </span>Acl<span class="w"> </span>pass<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">43123</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.305.904<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/anf_transform.cc:660<span class="o">]</span><span class="w"> </span>RunPass<span class="o">]</span><span class="w"> </span>Run<span class="w"> </span>convert<span class="w"> </span>pass<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">43123</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.305.928<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/anf_transform.cc:754<span class="o">]</span><span class="w"> </span>TransformFuncGraph<span class="o">]</span><span class="w"> </span>Proc<span class="w"> </span>online<span class="w"> </span>transform<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">43123</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.306.162<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/anf_transform.cc:855<span class="o">]</span><span class="w"> </span>Transform<span class="o">]</span><span class="w"> </span>optimizer<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>LITE<span class="o">(</span><span class="m">43123</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.306.188<span class="w"> </span><span class="o">[</span>mindspore/lite/tools/converter/converter_funcgraph.cc:471<span class="o">]</span><span class="w"> </span>Optimize<span class="o">]</span><span class="w"> </span>Transform<span class="w"> </span>anf<span class="w"> </span>graph<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>ME<span class="o">(</span><span class="m">43123</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.308.599<span class="w"> </span><span class="o">[</span>mindspore/lite/src/extendrt/convert/runtime_convert.cc:214<span class="o">]</span><span class="w"> </span>RuntimeConvert<span class="o">]</span><span class="w"> </span>Convert<span class="w"> </span>model<span class="w"> </span>failed
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>ME<span class="o">(</span><span class="m">43123</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.308.646<span class="w"> </span><span class="o">[</span>mindspore/lite/src/extendrt/cxx_api/model/model_impl.cc:507<span class="o">]</span><span class="w"> </span>ConvertGraphOnline<span class="o">]</span><span class="w"> </span>Failed<span class="w"> </span>to<span class="w"> </span>converter<span class="w"> </span>graph
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>ME<span class="o">(</span><span class="m">43123</span>,7f02bddd9740,python3<span class="o">)</span>:2023-11-10-03:40:46.308.712<span class="w"> </span><span class="o">[</span>mindspore/lite/src/extendrt/cxx_api/model/model_impl.cc:395<span class="o">]</span><span class="w"> </span>BuildByBufferImpl<span class="o">]</span><span class="w"> </span>convert<span class="w"> </span>graph<span class="w"> </span>failed.
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>MINDOCR<span class="o">(</span><span class="m">43123</span>:139649752078144,Process-1:17<span class="o">)</span>:2023-11-10-03:40:46.324.506<span class="w"> </span><span class="o">[</span>src/parallel/framework/module_base.py:38<span class="o">]</span><span class="w"> </span>DetPreNode<span class="w"> </span>init<span class="w"> </span>failed:<span class="w"> </span>build_from_file<span class="w"> </span>failed!<span class="w"> </span>Error<span class="w"> </span>is<span class="w"> </span>Common<span class="w"> </span>error<span class="w"> </span>code.
Process<span class="w"> </span>Process-1:17:
Traceback<span class="w"> </span><span class="o">(</span>most<span class="w"> </span>recent<span class="w"> </span>call<span class="w"> </span>last<span class="o">)</span>:
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/root/miniconda3/envs/py37/lib/python3.7/multiprocessing/process.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">297</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>_bootstrap
<span class="w">    </span>self.run<span class="o">()</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/root/miniconda3/envs/py37/lib/python3.7/multiprocessing/process.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">99</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>run
<span class="w">    </span>self._target<span class="o">(</span>*self._args,<span class="w"> </span>**self._kwargs<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/deploy/py_infer/src/parallel/framework/module_base.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">39</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>process_handler
<span class="w">    </span>raise<span class="w"> </span>error
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/deploy/py_infer/src/parallel/framework/module_base.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">34</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>process_handler
<span class="w">    </span><span class="nv">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>self.init_self_args<span class="o">()</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/deploy/py_infer/src/parallel/module/detection/det_pre_node.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">13</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>init_self_args
<span class="w">    </span>self.text_detector.init<span class="o">(</span><span class="nv">preprocess</span><span class="o">=</span>True,<span class="w"> </span><span class="nv">model</span><span class="o">=</span>False,<span class="w"> </span><span class="nv">postprocess</span><span class="o">=</span>False<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/deploy/py_infer/src/infer/infer_base.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">29</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>init
<span class="w">    </span>self._init_model<span class="o">()</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/deploy/py_infer/src/infer/infer_det.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">22</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>_init_model
<span class="w">    </span><span class="nv">device_id</span><span class="o">=</span>self.args.device_id,
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/deploy/py_infer/src/core/model/model.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">15</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>__init__
<span class="w">    </span>self.model<span class="w"> </span><span class="o">=</span><span class="w"> </span>_INFER_BACKEND_MAP<span class="o">[</span>backend<span class="o">](</span>**kwargs<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/deploy/py_infer/src/core/model/backend/lite_model.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">16</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>__init__
<span class="w">    </span>super<span class="o">()</span>.__init__<span class="o">(</span>model_path,<span class="w"> </span>device,<span class="w"> </span>device_id<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/deploy/py_infer/src/core/model/backend/model_base.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">28</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>__init__
<span class="w">    </span>self._init_model<span class="o">()</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/deploy/py_infer/src/core/model/backend/lite_model.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">33</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>_init_model
<span class="w">    </span>self.model.build_from_file<span class="o">(</span>self.model_path,<span class="w"> </span>mslite.ModelType.MINDIR,<span class="w"> </span>context<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/root/miniconda3/envs/py37/lib/python3.7/site-packages/mindspore_lite/model.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">95</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>warpper
<span class="w">    </span><span class="k">return</span><span class="w"> </span>func<span class="o">(</span>*args,<span class="w"> </span>**kwargs<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/root/miniconda3/envs/py37/lib/python3.7/site-packages/mindspore_lite/model.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">235</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>build_from_file
<span class="w">    </span>raise<span class="w"> </span>RuntimeError<span class="o">(</span>f<span class="s2">&quot;build_from_file failed! Error is {ret.ToString()}&quot;</span><span class="o">)</span>
RuntimeError:<span class="w"> </span>build_from_file<span class="w"> </span>failed!<span class="w"> </span>Error<span class="w"> </span>is<span class="w"> </span>Common<span class="w"> </span>error<span class="w"> </span>code.
</code></pre></div>
<p>Reason:</p>
<ul>
<li>Cloud-Side <code>mindir</code> model should convert to Device-Side <code>mindir</code> model first.</li>
<li>Mismatch version of <code>converter_lite</code> tool and <code>mindspore_lite</code>. For example, it may fail when using <code>converter_lite 2.2</code> to get Device-Side <code>mindir</code>, and do inference with <code>mindspore_lite 2.1</code>.</li>
</ul>
<h3 id="q8-problems-related-to-inference">Q8 Problems related to inference<a class="headerlink" href="#q8-problems-related-to-inference" title="Permanent link">&para;</a></h3>
<ul>
<li>When doing inference with <code>deploy/py_infer/infer.py</code>, it may occur <code>TypeError: unhashable type: 'numpy.ndarray'</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>MINDOCR<span class="o">(</span><span class="m">51913</span>:140354674829120,Process-1:28<span class="o">)</span>:2023-11-10-06:52:34.304.673<span class="w"> </span><span class="o">[</span>src/parallel/framework/module_base.py:66<span class="o">]</span><span class="w"> </span>ERROR<span class="w"> </span>occurred<span class="w"> </span><span class="k">in</span><span class="w"> </span>RecPostNode<span class="w"> </span>module<span class="w"> </span><span class="k">for</span><span class="w"> </span>test.jpg:<span class="w"> </span>unhashable<span class="w"> </span>type:<span class="w"> </span><span class="s1">&#39;numpy.ndarray&#39;</span>.
Traceback<span class="w"> </span><span class="o">(</span>most<span class="w"> </span>recent<span class="w"> </span>call<span class="w"> </span>last<span class="o">)</span>:
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/deploy/py_infer/src/parallel/framework/module_base.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">62</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>call_process
<span class="w">    </span>self.process<span class="o">(</span>send_data<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/deploy/py_infer/src/parallel/module/recognition/rec_post_node.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">24</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>process
<span class="w">    </span><span class="nv">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>self.text_recognizer.postprocess<span class="o">(</span>data<span class="o">[</span><span class="s2">&quot;pred&quot;</span><span class="o">]</span>,<span class="w"> </span>batch<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/deploy/py_infer/src/infer/infer_rec.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">132</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>postprocess
<span class="w">    </span><span class="k">return</span><span class="w"> </span>self.postprocess_ops<span class="o">(</span>pred<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/deploy/py_infer/src/data_process/postprocess/builder.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">32</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>__call__
<span class="w">    </span><span class="k">return</span><span class="w"> </span>self._ops_func<span class="o">(</span>*args,<span class="w"> </span>**kwargs<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/mindocr/postprocess/rec_postprocess.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">153</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>__call__
<span class="w">    </span><span class="nv">raw_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[[</span>self.character<span class="o">[</span>idx<span class="o">]</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>idx<span class="w"> </span><span class="k">in</span><span class="w"> </span>pred_indices<span class="o">[</span>b<span class="o">]]</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>b<span class="w"> </span><span class="k">in</span><span class="w"> </span>range<span class="o">(</span>pred_indices.shape<span class="o">[</span><span class="m">0</span><span class="o">])]</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/mindocr/postprocess/rec_postprocess.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">153</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>&lt;listcomp&gt;
<span class="w">    </span><span class="nv">raw_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[[</span>self.character<span class="o">[</span>idx<span class="o">]</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>idx<span class="w"> </span><span class="k">in</span><span class="w"> </span>pred_indices<span class="o">[</span>b<span class="o">]]</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>b<span class="w"> </span><span class="k">in</span><span class="w"> </span>range<span class="o">(</span>pred_indices.shape<span class="o">[</span><span class="m">0</span><span class="o">])]</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/home/mindocr/mindocr/postprocess/rec_postprocess.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">153</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>&lt;listcomp&gt;
<span class="w">    </span><span class="nv">raw_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[[</span>self.character<span class="o">[</span>idx<span class="o">]</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>idx<span class="w"> </span><span class="k">in</span><span class="w"> </span>pred_indices<span class="o">[</span>b<span class="o">]]</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>b<span class="w"> </span><span class="k">in</span><span class="w"> </span>range<span class="o">(</span>pred_indices.shape<span class="o">[</span><span class="m">0</span><span class="o">])]</span>
TypeError:<span class="w"> </span>unhashable<span class="w"> </span>type:<span class="w"> </span><span class="s1">&#39;numpy.ndarray&#39;</span>
</code></pre></div>
<p>This problem occurs due to shape error, please check:</p>
<ul>
<li>Use suitable model. For example, it may fail and pass detection model to <code>--rec_model_path</code> parameter.</li>
<li>Use inference model(not training model) to do converting.</li>
</ul>
<h3 id="q9-training-speed-of-dbnet-not-as-fast-as-expexted">Q9 Training speed of DBNet not as fast as expexted<a class="headerlink" href="#q9-training-speed-of-dbnet-not-as-fast-as-expexted" title="Permanent link">&para;</a></h3>
<p>When traning DBNet series networks (including DBNet MobileNetV3, DBNet ResNet-18, DBNet ResNet-50, and DBNet++ ResNet-50) using following command, the training speed is not as fast as expexted. For instance, the training speed of DBNet MobileNetV3 can reach only 80fps which is slower than the expecting 100fps.</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>tools/train.py<span class="w"> </span>-c<span class="w"> </span>configs/det/dbnet/db_mobilenetv3_icdar15.yaml
</code></pre></div>
<p>This problem is due to the complex data pre-processing procedures of DBNet. The data pre-processing procedures will become the performance bottleneck if the computation ability of a CPU core of the training server is relatively weak.</p>
<p><strong>Solutions</strong></p>
<ol>
<li>
<p>Try to set the <code>train.dataset.use_minddata</code> and <code>eval.dataset.use_minddata</code> in the configuration file to <code>True</code>. MindOCR will execute parts of data pre-processing procedures using MindSpore<a href="https://www.mindspore.cn/docs/zh-CN/master/api_python/dataset/dataset_method/operation/mindspore.dataset.Dataset.map.html?highlight=map#mindspore.dataset.Dataset.map">MindData</a>:</p>
<div class="highlight"><pre><span></span><code><span class="nn">...</span>
<span class="nt">train</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ckpt_save_dir</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;./tmp_det&#39;</span>
<span class="w">  </span><span class="nt">dataset_sink_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">  </span><span class="nt">dataset</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DetDataset</span>
<span class="w">    </span><span class="nt">dataset_root</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/data/ocr_datasets</span>
<span class="w">    </span><span class="nt">data_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ic15/det/train/ch4_training_images</span>
<span class="w">    </span><span class="nt">label_file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ic15/det/train/det_gt.txt</span>
<span class="w">    </span><span class="nt">sample_ratio</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">    </span><span class="nt">use_minddata</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True                          &lt;-- Set this configuration</span>
<span class="nn">...</span>
<span class="nt">eval</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ckpt_load_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tmp_det/best.ckpt</span>
<span class="w">  </span><span class="nt">dataset_sink_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">  </span><span class="nt">dataset</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DetDataset</span>
<span class="w">    </span><span class="nt">dataset_root</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/data/ocr_datasets</span>
<span class="w">    </span><span class="nt">data_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ic15/det/test/ch4_test_images</span>
<span class="w">    </span><span class="nt">label_file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ic15/det/test/det_gt.txt</span>
<span class="w">    </span><span class="nt">sample_ratio</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">    </span><span class="nt">use_minddata</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True                          &lt;-- Set this configuration</span>
<span class="nn">...</span>
</code></pre></div>
</li>
<li>
<p>Try to set the <code>train.loader.num_workers</code> in the configuration file to a larger value to enhance the number of threads fetching dataset if the training server has enough CPU cores:</p>
<div class="highlight"><pre><span></span><code><span class="nn">...</span>
<span class="nt">train</span><span class="p">:</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">loader</span><span class="p p-Indicator">:</span>
<span class="w">    </span><span class="nt">shuffle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">    </span><span class="nt">batch_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">    </span><span class="nt">drop_remainder</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">    </span><span class="nt">num_workers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">12                             &lt;-- Set this configuration</span>
<span class="nn">...</span>
</code></pre></div>
</li>
</ol>
<h3 id="q10-error-about-libgomp-d22c30c5so100">Q10 Error about <code>libgomp-d22c30c5.so.1.0.0</code><a class="headerlink" href="#q10-error-about-libgomp-d22c30c5so100" title="Permanent link">&para;</a></h3>
<p>The following error may occur when running mindocr
<div class="highlight"><pre><span></span><code>ImportError:<span class="w"> </span>/root/mindocr_env/lib/python3.8/site-packages/sklearn/__check_build/../../scikit_learn.libs/libgomp-d22c30c5.so.1.0.0:<span class="w"> </span>cannot<span class="w"> </span>allocate<span class="w"> </span>memory<span class="w"> </span><span class="k">in</span><span class="w"> </span>static<span class="w"> </span>TLS<span class="w"> </span>block
</code></pre></div>
You can try the following steps to fix it:</p>
<ul>
<li>
<p>search <code>libgomp-d22c30c5.so.1.0.0</code> in your python install path
   <div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/root/mindocr_env/lib/python3.8
find<span class="w"> </span>~<span class="w"> </span>-name<span class="w"> </span>libgomp-d22c30c5.so.1.0.0
</code></pre></div>
   and get the following search result:
   <div class="highlight"><pre><span></span><code>/root/mindocr_env/lib/python3.8/site-packages/scikit_learn.libs/libgomp-d22c30c5.so.1.0.0
</code></pre></div></p>
</li>
<li>
<p>Add the so file to environment variable <code>LD_PRELOAD</code>
   <div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">LD_PRELOAD</span><span class="o">=</span>/root/mindocr_env/lib/python3.8/site-packages/scikit_learn.libs/libgomp-d22c30c5.so.1.0.0:<span class="nv">$LD_PRELOAD</span>
</code></pre></div></p>
</li>
</ul>
<h3 id="q11-dataset-pipeline-error-when-training-abinet-on-lmdb-dataset">Q11 Dataset Pipeline Error when training abinet on lmdb dataset<a class="headerlink" href="#q11-dataset-pipeline-error-when-training-abinet-on-lmdb-dataset" title="Permanent link">&para;</a></h3>
<p>The following error may occur when training abinet on lmdb dataset
<div class="highlight"><pre><span></span><code>mindocr.data.rec_lmdb_dataset<span class="w"> </span>WARNING<span class="w"> </span>-<span class="w"> </span>Error<span class="w"> </span>occurred<span class="w"> </span>during<span class="w"> </span>preprocess.
<span class="w"> </span>Exception<span class="w"> </span>thrown<span class="w"> </span>from<span class="w"> </span>dataset<span class="w"> </span>pipeline.<span class="w"> </span>Refer<span class="w"> </span>to<span class="w"> </span><span class="s1">&#39;Dataset Pipeline Error Message&#39;</span>.

------------------------------------------------------------------
-<span class="w"> </span>Dataset<span class="w"> </span>Pipeline<span class="w"> </span>Error<span class="w"> </span>Message:
------------------------------------------------------------------
<span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>No<span class="w"> </span>cast<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>specified<span class="w"> </span>DataType<span class="w"> </span>was<span class="w"> </span>found.

------------------------------------------------------------------
-<span class="w"> </span>C++<span class="w"> </span>Call<span class="w"> </span>Stack:<span class="w"> </span><span class="o">(</span>For<span class="w"> </span>framework<span class="w"> </span>developers<span class="o">)</span>
------------------------------------------------------------------
mindspore/ccsrc/minddata/dataset/kernels/py_func_op.cc<span class="o">(</span><span class="m">143</span><span class="o">)</span>.
</code></pre></div>
You can try the following steps to fix it:</p>
<ul>
<li>find the folder of mindspore package</li>
<li>open file: <code>mindspore/dataset/transforms/transform.py</code></li>
<li>
<p>switch to line 93:
  <div class="highlight"><pre><span></span><code><span class="m">93</span><span class="w">        </span><span class="k">if</span><span class="w"> </span>key<span class="w"> </span><span class="k">in</span><span class="w"> </span>EXECUTORS_LIST:
<span class="m">94</span><span class="w">           </span><span class="c1"># get the executor by process id and thread id</span>
<span class="m">95</span><span class="w">            </span><span class="nv">executor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>EXECUTORS_LIST<span class="o">[</span>key<span class="o">]</span>
<span class="m">96</span><span class="w">            </span><span class="c1"># remove the old transform which in executor and update the new transform</span>
<span class="m">97</span><span class="w">            </span>executor.UpdateOperation<span class="o">(</span>self.parse<span class="o">())</span>
<span class="m">98</span><span class="w">        </span><span class="k">else</span>:
<span class="m">99</span><span class="w">            </span><span class="c1"># create a new executor by process id and thread_id</span>
<span class="m">100</span><span class="w">           </span><span class="nv">executor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>cde.Execute<span class="o">(</span>self.parse<span class="o">())</span>
<span class="m">101</span><span class="w">           </span><span class="c1"># add the executor the global EXECUTORS_LIST</span>
<span class="m">102</span><span class="w">           </span>EXECUTORS_LIST<span class="o">[</span>key<span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>executor
</code></pre></div></p>
</li>
<li>
<p>replace line 97 with <code>executor = cde.Execute(self.parse())</code>, and get
  <div class="highlight"><pre><span></span><code><span class="m">93</span><span class="w">        </span><span class="k">if</span><span class="w"> </span>key<span class="w"> </span><span class="k">in</span><span class="w"> </span>EXECUTORS_LIST:
<span class="m">94</span><span class="w">            </span><span class="c1"># get the executor by process id and thread id</span>
<span class="m">95</span><span class="w">            </span><span class="nv">executor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>EXECUTORS_LIST<span class="o">[</span>key<span class="o">]</span>
<span class="m">96</span><span class="w">            </span><span class="c1"># remove the old transform which in executor and update the new transform</span>
<span class="m">97</span><span class="w">            </span><span class="nv">executor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>cde.Execute<span class="o">(</span>self.parse<span class="o">())</span>
<span class="m">98</span><span class="w">        </span><span class="k">else</span>:
<span class="m">99</span><span class="w">            </span><span class="c1"># create a new executor by process id and thread_id</span>
<span class="m">100</span><span class="w">           </span><span class="nv">executor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>cde.Execute<span class="o">(</span>self.parse<span class="o">())</span>
<span class="m">101</span><span class="w">           </span><span class="c1"># add the executor the global EXECUTORS_LIST</span>
<span class="m">102</span><span class="w">           </span>EXECUTORS_LIST<span class="o">[</span>key<span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>executor
</code></pre></div></p>
</li>
<li>
<p>save the file, and try to train the model.</p>
</li>
</ul>
<h3 id="q12-runtime-error-when-training-dbnet-on-synthtext-dataset">Q12 Runtime Error when training dbnet on synthtext dataset<a class="headerlink" href="#q12-runtime-error-when-training-dbnet-on-synthtext-dataset" title="Permanent link">&para;</a></h3>
<p>Runtime Error occur as following when training dbnet on synthtext dataset:
<div class="highlight"><pre><span></span><code>Traceback<span class="w"> </span><span class="o">(</span>most<span class="w"> </span>recent<span class="w"> </span>call<span class="w"> </span>last<span class="o">)</span>:
<span class="w">  </span>...
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/root/archiconda3/envs/Python380/lib/python3.8/site-packages/mindspore/common/api.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">1608</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>_exec_pip
<span class="w">    </span><span class="k">return</span><span class="w"> </span>self.graph_executor<span class="o">(</span>args,<span class="w"> </span>phase<span class="o">)</span>
RuntimeError:<span class="w"> </span>Run<span class="w"> </span>task<span class="w"> </span><span class="k">for</span><span class="w"> </span>graph:kernel_graph_1<span class="w"> </span>error!<span class="w"> </span>The<span class="w"> </span>details<span class="w"> </span>reger<span class="w"> </span>to<span class="w"> </span><span class="s1">&#39;Ascend Error Message&#39;</span>
</code></pre></div>
Please update CANN to 7.1 version.</p>
<h3 id="q13-failed-to-install-seqeval">Q13 Failed to install seqeval<a class="headerlink" href="#q13-failed-to-install-seqeval" title="Permanent link">&para;</a></h3>
<p>The following error occur when run <code>pip install -r requirements.txt</code>
<div class="highlight"><pre><span></span><code>Collecting<span class="w"> </span>seqeval&gt;<span class="o">=</span><span class="m">1</span>.2.2<span class="w"> </span><span class="o">(</span>from<span class="w"> </span>-r<span class="w"> </span>requirements.txt<span class="w"> </span><span class="o">(</span>line<span class="w"> </span><span class="m">19</span><span class="o">))</span>
<span class="w">  </span>Downloading<span class="w"> </span>http://mirrors.aliyun.com/pypi/packages/9d/2d/233c79d5b4e5ab1dbf111242299153f3caddddbb691219f363ad55ce783d/seqeval-1.2.2.tar.gz<span class="w"> </span><span class="o">(</span><span class="m">43</span><span class="w"> </span>kB<span class="o">)</span>
<span class="w">     </span>━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━<span class="w"> </span><span class="m">43</span>.6/43.6<span class="w"> </span>kB<span class="w"> </span><span class="m">181</span>.0<span class="w"> </span>kB/s<span class="w"> </span>eta<span class="w"> </span><span class="m">0</span>:00:00
<span class="w">  </span>Preparing<span class="w"> </span>metadata<span class="w"> </span><span class="o">(</span>setup.py<span class="o">)</span><span class="w"> </span>...<span class="w"> </span>error
<span class="w">  </span>error:<span class="w"> </span>subprocess-exited-with-error

<span class="w">  </span>×<span class="w"> </span>python<span class="w"> </span>setup.py<span class="w"> </span>egg_info<span class="w"> </span>did<span class="w"> </span>not<span class="w"> </span>run<span class="w"> </span>successfully.
<span class="w">  </span>│<span class="w"> </span><span class="nb">exit</span><span class="w"> </span>code:<span class="w"> </span><span class="m">1</span>
<span class="w">  </span>╰─&gt;<span class="w"> </span><span class="o">[</span><span class="m">48</span><span class="w"> </span>lines<span class="w"> </span>of<span class="w"> </span>output<span class="o">]</span>
<span class="w">      </span>/home/ma-user/anaconda3/envs/MindSpore/lib/python3.9/site-packages/setuptools/__init__.py:80:<span class="w"> </span>_DeprecatedInstaller:<span class="w"> </span>setuptools.installer<span class="w"> </span>and<span class="w"> </span>fetch_build_eggs<span class="w"> </span>are<span class="w"> </span>deprecated.
<span class="w">      </span>!!

<span class="w">              </span>********************************************************************************
<span class="w">              </span>Requirements<span class="w"> </span>should<span class="w"> </span>be<span class="w"> </span>satisfied<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>PEP<span class="w"> </span><span class="m">517</span><span class="w"> </span>installer.
<span class="w">              </span>If<span class="w"> </span>you<span class="w"> </span>are<span class="w"> </span>using<span class="w"> </span>pip,<span class="w"> </span>you<span class="w"> </span>can<span class="w"> </span>try<span class="w"> </span><span class="sb">`</span>pip<span class="w"> </span>install<span class="w"> </span>--use-pep517<span class="sb">`</span>.
<span class="w">              </span>********************************************************************************

<span class="w">      </span>!!
<span class="w">        </span>dist.fetch_build_eggs<span class="o">(</span>dist.setup_requires<span class="o">)</span>
<span class="w">      </span>WARNING:<span class="w"> </span>The<span class="w"> </span>repository<span class="w"> </span>located<span class="w"> </span>at<span class="w"> </span>mirrors.aliyun.com<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>a<span class="w"> </span>trusted<span class="w"> </span>or<span class="w"> </span>secure<span class="w"> </span>host<span class="w"> </span>and<span class="w"> </span>is<span class="w"> </span>being<span class="w"> </span>ignored.<span class="w"> </span>If<span class="w"> </span>this<span class="w"> </span>repository<span class="w"> </span>is<span class="w"> </span>available<span class="w"> </span>via<span class="w"> </span>HTTPS<span class="w"> </span>we<span class="w"> </span>recommend<span class="w"> </span>you<span class="w"> </span>use<span class="w"> </span>HTTPS<span class="w"> </span>instead,<span class="w"> </span>otherwise<span class="w"> </span>you<span class="w"> </span>may<span class="w"> </span>silence<span class="w"> </span>this<span class="w"> </span>warning<span class="w"> </span>and<span class="w"> </span>allow<span class="w"> </span>it<span class="w"> </span>anyway<span class="w"> </span>with<span class="w"> </span><span class="s1">&#39;--trusted-host mirrors.aliyun.com&#39;</span>.
<span class="w">      </span>ERROR:<span class="w"> </span>Could<span class="w"> </span>not<span class="w"> </span>find<span class="w"> </span>a<span class="w"> </span>version<span class="w"> </span>that<span class="w"> </span>satisfies<span class="w"> </span>the<span class="w"> </span>requirement<span class="w"> </span>setuptools_scm<span class="w"> </span><span class="o">(</span>from<span class="w"> </span>versions:<span class="w"> </span>none<span class="o">)</span>
<span class="w">      </span>ERROR:<span class="w"> </span>No<span class="w"> </span>matching<span class="w"> </span>distribution<span class="w"> </span>found<span class="w"> </span><span class="k">for</span><span class="w"> </span>setuptools_scm
<span class="w">      </span>Traceback<span class="w"> </span><span class="o">(</span>most<span class="w"> </span>recent<span class="w"> </span>call<span class="w"> </span>last<span class="o">)</span>:
<span class="w">        </span>File<span class="w"> </span><span class="s2">&quot;/home/ma-user/anaconda3/envs/MindSpore/lib/python3.9/site-packages/setuptools/installer.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">101</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>_fetch_build_egg_no_warn
<span class="w">          </span>subprocess.check_call<span class="o">(</span>cmd<span class="o">)</span>
<span class="w">        </span>File<span class="w"> </span><span class="s2">&quot;/home/ma-user/anaconda3/envs/MindSpore/lib/python3.9/subprocess.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">373</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>check_call
<span class="w">          </span>raise<span class="w"> </span>CalledProcessError<span class="o">(</span>retcode,<span class="w"> </span>cmd<span class="o">)</span>
<span class="w">      </span>subprocess.CalledProcessError:<span class="w"> </span>Command<span class="w"> </span><span class="s1">&#39;[&#39;</span>/home/ma-user/anaconda3/envs/MindSpore/bin/python3.9<span class="s1">&#39;, &#39;</span>-m<span class="s1">&#39;, &#39;</span>pip<span class="s1">&#39;, &#39;</span>--disable-pip-version-check<span class="s1">&#39;, &#39;</span>wheel<span class="s1">&#39;, &#39;</span>--no-deps<span class="s1">&#39;, &#39;</span>-w<span class="s1">&#39;, &#39;</span>/tmp/tmpusgt0k69<span class="s1">&#39;, &#39;</span>--quiet<span class="s1">&#39;, &#39;</span>setuptools_scm<span class="s1">&#39;]&#39;</span><span class="w"> </span>returned<span class="w"> </span>non-zero<span class="w"> </span><span class="nb">exit</span><span class="w"> </span>status<span class="w"> </span><span class="m">1</span>.

<span class="w">      </span>The<span class="w"> </span>above<span class="w"> </span>exception<span class="w"> </span>was<span class="w"> </span>the<span class="w"> </span>direct<span class="w"> </span>cause<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>exception:

<span class="w">      </span>Traceback<span class="w"> </span><span class="o">(</span>most<span class="w"> </span>recent<span class="w"> </span>call<span class="w"> </span>last<span class="o">)</span>:
<span class="w">        </span>File<span class="w"> </span><span class="s2">&quot;&lt;string&gt;&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">2</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>&lt;module&gt;
<span class="w">        </span>File<span class="w"> </span><span class="s2">&quot;&lt;pip-setuptools-caller&gt;&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">34</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>&lt;module&gt;
<span class="w">        </span>File<span class="w"> </span><span class="s2">&quot;/tmp/pip-install-m2kqztlz/seqeval_da00f708dc0e483b92cd18083513d5e7/setup.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">27</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>&lt;module&gt;
<span class="w">          </span>setup<span class="o">(</span>
<span class="w">        </span>File<span class="w"> </span><span class="s2">&quot;/home/ma-user/anaconda3/envs/MindSpore/lib/python3.9/site-packages/setuptools/__init__.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">102</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>setup
<span class="w">          </span>_install_setup_requires<span class="o">(</span>attrs<span class="o">)</span>
<span class="w">        </span>File<span class="w"> </span><span class="s2">&quot;/home/ma-user/anaconda3/envs/MindSpore/lib/python3.9/site-packages/setuptools/__init__.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">75</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>_install_setup_requires
<span class="w">          </span>_fetch_build_eggs<span class="o">(</span>dist<span class="o">)</span>
<span class="w">        </span>File<span class="w"> </span><span class="s2">&quot;/home/ma-user/anaconda3/envs/MindSpore/lib/python3.9/site-packages/setuptools/__init__.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">80</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>_fetch_build_eggs
<span class="w">          </span>dist.fetch_build_eggs<span class="o">(</span>dist.setup_requires<span class="o">)</span>
<span class="w">        </span>File<span class="w"> </span><span class="s2">&quot;/home/ma-user/anaconda3/envs/MindSpore/lib/python3.9/site-packages/setuptools/dist.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">636</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>fetch_build_eggs
<span class="w">          </span><span class="k">return</span><span class="w"> </span>_fetch_build_eggs<span class="o">(</span>self,<span class="w"> </span>requires<span class="o">)</span>
<span class="w">        </span>File<span class="w"> </span><span class="s2">&quot;/home/ma-user/anaconda3/envs/MindSpore/lib/python3.9/site-packages/setuptools/installer.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">38</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>_fetch_build_eggs
<span class="w">          </span><span class="nv">resolved_dists</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>pkg_resources.working_set.resolve<span class="o">(</span>
<span class="w">        </span>File<span class="w"> </span><span class="s2">&quot;/home/ma-user/anaconda3/envs/MindSpore/lib/python3.9/site-packages/pkg_resources/__init__.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">829</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>resolve
<span class="w">          </span><span class="nv">dist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>self._resolve_dist<span class="o">(</span>
<span class="w">        </span>File<span class="w"> </span><span class="s2">&quot;/home/ma-user/anaconda3/envs/MindSpore/lib/python3.9/site-packages/pkg_resources/__init__.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">865</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>_resolve_dist
<span class="w">          </span><span class="nv">dist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>best<span class="o">[</span>req.key<span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>env.best_match<span class="o">(</span>
<span class="w">        </span>File<span class="w"> </span><span class="s2">&quot;/home/ma-user/anaconda3/envs/MindSpore/lib/python3.9/site-packages/pkg_resources/__init__.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">1135</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>best_match
<span class="w">          </span><span class="k">return</span><span class="w"> </span>self.obtain<span class="o">(</span>req,<span class="w"> </span>installer<span class="o">)</span>
<span class="w">        </span>File<span class="w"> </span><span class="s2">&quot;/home/ma-user/anaconda3/envs/MindSpore/lib/python3.9/site-packages/pkg_resources/__init__.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">1147</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>obtain
<span class="w">          </span><span class="k">return</span><span class="w"> </span>installer<span class="o">(</span>requirement<span class="o">)</span>
<span class="w">        </span>File<span class="w"> </span><span class="s2">&quot;/home/ma-user/anaconda3/envs/MindSpore/lib/python3.9/site-packages/setuptools/installer.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">103</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>_fetch_build_egg_no_warn
<span class="w">          </span>raise<span class="w"> </span>DistutilsError<span class="o">(</span>str<span class="o">(</span>e<span class="o">))</span><span class="w"> </span>from<span class="w"> </span>e
<span class="w">      </span>distutils.errors.DistutilsError:<span class="w"> </span>Command<span class="w"> </span><span class="s1">&#39;[&#39;</span>/home/ma-user/anaconda3/envs/MindSpore/bin/python3.9<span class="s1">&#39;, &#39;</span>-m<span class="s1">&#39;, &#39;</span>pip<span class="s1">&#39;, &#39;</span>--disable-pip-version-check<span class="s1">&#39;, &#39;</span>wheel<span class="s1">&#39;, &#39;</span>--no-deps<span class="s1">&#39;, &#39;</span>-w<span class="s1">&#39;, &#39;</span>/tmp/tmpusgt0k69<span class="s1">&#39;, &#39;</span>--quiet<span class="s1">&#39;, &#39;</span>setuptools_scm<span class="s1">&#39;]&#39;</span><span class="w"> </span>returned<span class="w"> </span>non-zero<span class="w"> </span><span class="nb">exit</span><span class="w"> </span>status<span class="w"> </span><span class="m">1</span>.
<span class="w">      </span><span class="o">[</span>end<span class="w"> </span>of<span class="w"> </span>output<span class="o">]</span>

<span class="w">  </span>note:<span class="w"> </span>This<span class="w"> </span>error<span class="w"> </span>originates<span class="w"> </span>from<span class="w"> </span>a<span class="w"> </span>subprocess,<span class="w"> </span>and<span class="w"> </span>is<span class="w"> </span>likely<span class="w"> </span>not<span class="w"> </span>a<span class="w"> </span>problem<span class="w"> </span>with<span class="w"> </span>pip.
error:<span class="w"> </span>metadata-generation-failed

×<span class="w"> </span>Encountered<span class="w"> </span>error<span class="w"> </span><span class="k">while</span><span class="w"> </span>generating<span class="w"> </span>package<span class="w"> </span>metadata.
╰─&gt;<span class="w"> </span>See<span class="w"> </span>above<span class="w"> </span><span class="k">for</span><span class="w"> </span>output.

note:<span class="w"> </span>This<span class="w"> </span>is<span class="w"> </span>an<span class="w"> </span>issue<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>package<span class="w"> </span>mentioned<span class="w"> </span>above,<span class="w"> </span>not<span class="w"> </span>pip.
</code></pre></div>
Please try the following steps to fix this problem:</p>
<ul>
<li>Update <code>setuptools</code>: <code>pip3 install --upgrade setuptools</code></li>
<li>Update <code>setuptools_scm</code>: <code>pip3 install --upgrade setuptools_scm</code></li>
<li>Install <code>seqeval</code>: <code>pip3 install seqeval -i https://pypi.tuna.tsinghua.edu.cn/simple</code></li>
</ul>
<h3 id="q14-failed-to-install-lanms">Q14 Failed to install lanms<a class="headerlink" href="#q14-failed-to-install-lanms" title="Permanent link">&para;</a></h3>
<p>The following error occur when installing lanms
<div class="highlight"><pre><span></span><code>ImportError:<span class="w"> </span>Python<span class="w"> </span>version<span class="w"> </span>mismatch:<span class="w"> </span>module<span class="w"> </span>was<span class="w"> </span>compiled<span class="w"> </span><span class="k">for</span><span class="w"> </span>version<span class="w"> </span><span class="m">3</span>.8,<span class="w"> </span><span class="k">while</span><span class="w"> </span>the<span class="w"> </span>interpreter<span class="w"> </span>is<span class="w"> </span>running<span class="w"> </span>version<span class="w"> </span><span class="m">3</span>.7.
</code></pre></div>
Some Python 3.7 environment may meet this problem when multiple python3 environment exists. You could try the following steps to solve this problem:</p>
<ul>
<li>run <code>pip3 install lanms -i https://pypi.tuna.tsinghua.edu.cn/simple</code>, and get the url for downloading <code>lanms-1.0.2.tar.gz</code>(like https://pypi.tuna.tsinghua.edu.cn/packages/96/c0/50dc2c857ed060e907adaef31184413a7706e475c322236d346382e45195/lanms-1.0.2.tar.gz)</li>
<li>use this url and dowload the <code>lanms-1.0.2.tar.gz</code>, run <code>tar -zxvf lanms-1.0.2.tar.gz</code> to decompress the package.</li>
<li><code>cd lanms-1.0.2</code></li>
<li>
<p>edit the <code>Makefile</code>, replace <code>python3-config</code> with <code>python3.7-config</code> in line 1 and line 2, and you could get
   <div class="highlight"><pre><span></span><code>CXXFLAGS = -I include  -std=c++11 -O3 $(shell python3.7-config --cflags)
LDFLAGS = $(shell python3.7-config --ldflags)
...
</code></pre></div>
   save <code>Makefile</code>. So that the make process would exactly compile with python3.7 environment</p>
</li>
<li>
<p>run <code>python setup.py install</code> and completely install lanms.</p>
</li>
</ul>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../mkdocs/contributing/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Contributing">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Contributing
              </div>
            </div>
          </a>
        
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 - 2025 MindSpore Lab
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="mailto:mindspore-lab@huawei.com" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.8l167.6-182.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/mindspore-lab/mindocr" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.zhihu.com/people/mindsporelab" target="_blank" rel="noopener" title="www.zhihu.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M170.54 148.13v217.54l23.43.01 7.71 26.37 42.01-26.37h49.53V148.13zm97.75 193.93h-27.94l-27.9 17.51-5.08-17.47-11.9-.04V171.75h72.82zm-118.46-94.39H97.5c1.74-27.1 2.2-51.59 2.2-73.46h51.16s1.97-22.56-8.58-22.31h-88.5c3.49-13.12 7.87-26.66 13.12-40.67 0 0-24.07 0-32.27 21.57-3.39 8.9-13.21 43.14-30.7 78.12 5.89-.64 25.37-1.18 36.84-22.21 2.11-5.89 2.51-6.66 5.14-14.53h28.87c0 10.5-1.2 66.88-1.68 73.44H20.83c-11.74 0-15.56 23.62-15.56 23.62h65.58C66.45 321.1 42.83 363.12 0 396.34c20.49 5.85 40.91-.93 51-9.9 0 0 22.98-20.9 35.59-69.25l53.96 64.94s7.91-26.89-1.24-39.99c-7.58-8.92-28.06-33.06-36.79-41.81L87.9 311.95c4.36-13.98 6.99-27.55 7.87-40.67h61.65s-.09-23.62-7.59-23.62zm412.02-1.6c20.83-25.64 44.98-58.57 44.98-58.57s-18.65-14.8-27.38-4.06c-6 8.15-36.83 48.2-36.83 48.2zm-150.09-59.09c-9.01-8.25-25.91 2.13-25.91 2.13s39.52 55.04 41.12 57.45l19.46-13.73s-25.67-37.61-34.66-45.86h-.01zM640 258.35c-19.78 0-130.91.93-131.06.93v-101c4.81 0 12.42-.4 22.85-1.2 40.88-2.41 70.13-4 87.77-4.81 0 0 12.22-27.19-.59-33.44-3.07-1.18-23.17 4.58-23.17 4.58s-165.22 16.49-232.36 18.05c1.6 8.82 7.62 17.08 15.78 19.55 13.31 3.48 22.69 1.7 49.15.89 24.83-1.6 43.68-2.43 56.51-2.43v99.81H351.41s2.82 22.31 25.51 22.85h107.94v70.92c0 13.97-11.19 21.99-24.48 21.12-14.08.11-26.08-1.15-41.69-1.81 1.99 3.97 6.33 14.39 19.31 21.84 9.88 4.81 16.17 6.57 26.02 6.57 29.56 0 45.67-17.28 44.89-45.31v-73.32h122.36c9.68 0 8.7-23.78 8.7-23.78z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.indexes", "navigation.top", "navigation.footer", "toc.follow", "search.highlight", "search.share", "search.suggest", "content.action.view", "content.action.edit", "content.tabs.link", "content.code.copy", "content.code.select", "content.code.annotations"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>